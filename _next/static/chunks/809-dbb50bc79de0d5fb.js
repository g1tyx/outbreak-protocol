"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[809],{182:e=>{e.exports=JSON.parse('[{"id":"central_hub","name":"Central Hub","description":"Your starting location and command center","unlockCost":0,"bonuses":{"globalStability":5,"productionBonus":{"shelter":1.12}},"initialStatus":"safe","stabilizationCost":{"supplies":800,"influence":80},"maintenanceCost":{"supplies":0.5,"influence":0.05},"decayRate":0.02,"defenseLevel":0,"population":5000},{"id":"northern_plains","name":"Northern Plains","description":"Fertile agricultural region with abundant farmland","unlockCost":40,"bonuses":{"productionBonus":{"farm":1.1}},"initialStatus":"unstable","stabilizationCost":{"supplies":1500,"influence":150},"maintenanceCost":{"supplies":1,"influence":0.1},"decayRate":0.04,"defenseLevel":0,"population":8000},{"id":"eastern_coast","name":"Eastern Coast","description":"Coastal region with strategic communication advantages","unlockCost":120,"bonuses":{"productionBonus":{"radio_tower":1.12},"morale":4},"initialStatus":"unstable","stabilizationCost":{"supplies":2500,"influence":250},"maintenanceCost":{"supplies":1.5,"influence":0.15},"decayRate":0.05,"defenseLevel":0,"population":12000},{"id":"southern_valley","name":"Southern Valley","description":"Protected valley ideal for shelter and farming","unlockCost":400,"bonuses":{"productionBonus":{"farm":1.15,"shelter":1.08}},"initialStatus":"red","stabilizationCost":{"supplies":4000,"influence":400},"maintenanceCost":{"supplies":2.5,"influence":0.25},"decayRate":0.06,"defenseLevel":0,"population":15000},{"id":"western_mountains","name":"Western Mountains","description":"Isolated mountain region with natural containment advantages","unlockCost":1200,"bonuses":{"containmentCoefficient":0.025,"productionBonus":{"lab":1.12}},"initialStatus":"red","stabilizationCost":{"supplies":6500,"influence":650},"maintenanceCost":{"supplies":3,"influence":0.3},"decayRate":0.03,"defenseLevel":0,"population":6000},{"id":"industrial_zone","name":"Industrial Zone","description":"Former industrial center with manufacturing capabilities","unlockCost":2500,"bonuses":{"productionBonus":{"workshop":1.18},"globalStability":4},"initialStatus":"red","stabilizationCost":{"supplies":10000,"influence":1000},"maintenanceCost":{"supplies":4,"influence":0.4},"decayRate":0.08,"defenseLevel":0,"population":20000}]')},677:(e,t,i)=>{i.d(t,{Qg:()=>f,Sb:()=>m,US:()=>d,aD:()=>b,eC:()=>g,tE:()=>c,y8:()=>p});var n=i(5155),o=i(2115),s=i(6621),r=i(2085),a=i(4416),l=i(3999);let c=s.Kq,d=o.forwardRef((e,t)=>{let{className:i,...o}=e;return(0,n.jsx)(s.LM,{ref:t,className:(0,l.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",i),...o})});d.displayName=s.LM.displayName;let u=(0,r.F)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),p=o.forwardRef((e,t)=>{let{className:i,variant:o,...r}=e;return(0,n.jsx)(s.bL,{ref:t,className:(0,l.cn)(u({variant:o}),i),...r})});p.displayName=s.bL.displayName;let f=o.forwardRef((e,t)=>{let{className:i,...o}=e;return(0,n.jsx)(s.rc,{ref:t,className:(0,l.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",i),...o})});f.displayName=s.rc.displayName;let g=o.forwardRef((e,t)=>{let{className:i,...o}=e;return(0,n.jsx)(s.bm,{ref:t,className:(0,l.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",i),"toast-close":"",...o,children:(0,n.jsx)(a.A,{className:"h-4 w-4"})})});g.displayName=s.bm.displayName;let m=o.forwardRef((e,t)=>{let{className:i,...o}=e;return(0,n.jsx)(s.hE,{ref:t,className:(0,l.cn)("text-sm font-semibold",i),...o})});m.displayName=s.hE.displayName;let b=o.forwardRef((e,t)=>{let{className:i,...o}=e;return(0,n.jsx)(s.VY,{ref:t,className:(0,l.cn)("text-sm opacity-90",i),...o})});b.displayName=s.VY.displayName},1981:(e,t,i)=>{i.d(t,{$v:()=>u,L1:()=>m,O$:()=>p,TR:()=>d,Xk:()=>c,_y:()=>g,yC:()=>l,zh:()=>f});var n=i(9987),o=i(9815),s=i(4428),r=i(6106),a=i(182);function l(e){return e.reduce((e,t)=>(e[t.id]=t,e),{})}function c(e,t,i){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(!t||e.level<=0||!1===e.active)return{};let c=1,d=0;e.upgrades.forEach(e=>{let t=o.find(t=>t.id===e);t&&t.effects&&(t.effects.productionMultiplier&&(c*=t.effects.productionMultiplier),t.effects.workerEfficiency&&(d+=t.effects.workerEfficiency))});let u=1;l.forEach(t=>{var i;if(!t.researched)return;let n=s.find(e=>e.id===t.id);if(n&&n.effects.productionBonus){let t=n.effects.productionBonus[e.id];t&&(u*=t)}null===(i=t.subUpgrades)||void 0===i||i.forEach(t=>{let i=r.find(e=>e.id===t);if(i&&i.effects.productionBonus){let t=i.effects.productionBonus[e.id];t&&(u*=t)}})});let p={},f=i.productionMultiplier,g=1+a,m=t.productionExponent||1,b=t.workerEfficiency+d,v=c*u,h=(t,i)=>{if(!i)return;let o=(0,n.KY)(i,e.level,e.workers||0,b,[v],m)*f*g;o>0&&(p[t]=o)};return h("survivors",t.baseProduction.survivors),h("supplies",t.baseProduction.supplies),h("knowledge",t.baseProduction.knowledge),h("influence",t.baseProduction.influence),p}function d(e){let t=0;return e.upgrades.forEach(e=>{let i=o.find(t=>t.id===e);i&&i.effects&&i.effects.costReduction&&(t+=i.effects.costReduction)}),t}function u(e,t,i){var o,s;if(!t||e.level<=0||!1===e.active)return{active:!1,baseUpkeep:0,workerUpkeep:0,totalUpkeep:0};let r=d(e),a=null!==(s=null===(o=t.maintenance)||void 0===o?void 0:o.supplies)&&void 0!==s?s:t.baseCost.supplies?.006*(0,n.yN)(t.baseCost.supplies,Math.max(0,e.level-1),t.costMultiplier):0,l=1+.08*Math.max(0,e.level-1),c=(1-i.maintenanceReduction)*(1-r),u=a*l*c,p=.005*(e.workers||0)*c;return{active:!0,baseUpkeep:u,workerUpkeep:p,totalUpkeep:u+p}}function p(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Date.now(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],l={survivors:0,supplies:0,knowledge:0,influence:0},d=n.filter(e=>e.expiresAt>o),p=0,g=e.map(e=>{var n,r;let a=t[e.id],g=f(d,e.id,o),m=c(e,a,i,g,s),b=u(e,a,i),v=null!==(r=null!==(n=null==a?void 0:a.name)&&void 0!==n?n:null==a?void 0:a.nameKey)&&void 0!==r?r:e.id;return Object.entries(m).forEach(e=>{let[t,i]=e;l[t]+=i||0}),p+=b.totalUpkeep,{id:e.id,name:v,level:e.level,active:b.active,production:m,maintenance:b,workers:e.workers}}),m=0,b=0;return r.forEach(e=>{if(e.unlocked){let t=a.find(t=>t.id===e.id);if(t&&t.maintenanceCost){let e=t.maintenanceCost;m+=e.supplies||0,b+=e.influence||0}}}),{productionTotals:l,maintenanceTotal:p,provinceMaintenanceSupplies:m,provinceMaintenanceInfluence:b,breakdown:g}}function f(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now();return e.reduce((e,n)=>n.expiresAt<=i?e:"all"===n.target||n.target===t?e+n.value:e,0)}function g(e){let t=1,i=0,n=0;return e.upgrades.forEach(e=>{let s=o.find(t=>t.id===e);s&&s.effects&&(s.effects.productionMultiplier&&(t*=s.effects.productionMultiplier),s.effects.workerEfficiency&&(i+=s.effects.workerEfficiency),s.effects.costReduction&&(n+=s.effects.costReduction))}),{productionMultiplier:t,workerEfficiency:i,costReduction:n,hasUpgrades:e.upgrades.length>0,upgradeCount:e.upgrades.length}}function m(e,t){let i=1,n=[],o=[];return t.forEach(t=>{var a;if(!t.researched)return;let l=s.find(e=>e.id===t.id);if(l&&l.effects.productionBonus){let t=l.effects.productionBonus[e];t&&(i*=t,n.push(l.name))}null===(a=t.subUpgrades)||void 0===a||a.forEach(t=>{let n=r.find(e=>e.id===t);if(n&&n.effects.productionBonus){let t=n.effects.productionBonus[e];t&&(i*=t,o.push(n.name))}})}),{productionMultiplier:i,hasResearch:i>1,technologies:n,subUpgrades:o}}},3105:e=>{e.exports=JSON.parse('[{"id":0,"name":"Red Alert","description":"The outbreak has begun. Establish basic infrastructure while keeping your supply income positive.","objectives":[{"type":"building_level","buildingId":"shelter","level":10,"description":"Build Refugee Shelter to level 10"},{"type":"building_level","buildingId":"farm","level":5,"description":"Build Supply Farm to level 5 to sustain ongoing upkeep"},{"type":"building_level","buildingId":"radio_tower","level":3,"description":"Build Radio Tower to level 3 and maintain a positive supply trend"}],"rewards":{"globalStability":5}},{"id":1,"name":"Urban Chaos","description":"Expand your control and stabilize nearby territories while managing the infection.","objectives":[{"type":"provinces_secure","count":2,"description":"Secure 2 provinces"},{"type":"attribute","attribute":"infectionRate","operator":"<","value":40,"description":"Reduce infection rate below 40%"}],"rewards":{"globalStability":5,"morale":5}},{"id":2,"name":"Desperate Research","description":"Focus on research to understand the infection and develop countermeasures.","objectives":[{"type":"building_level","buildingId":"lab","level":20,"description":"Build Research Lab to level 20"},{"type":"technology_tier","tier":2,"count":1,"description":"Research 1 Tier 2 technology"}],"rewards":{"knowledge":500,"containmentCoefficient":0.02}},{"id":3,"name":"Containment Protocol","description":"Implement advanced containment measures to slow the infection\'s spread.","objectives":[{"type":"building_level","buildingId":"containment_unit","level":25,"description":"Build Containment Unit to level 25"},{"type":"attribute","attribute":"infectionRate","operator":"<","value":35,"duration":300,"description":"Maintain infection rate below 35% for 5 minutes"}],"rewards":{"globalStability":5,"containmentCoefficient":0.02}},{"id":4,"name":"Infrastructure Expansion","description":"Build a robust infrastructure network to support the growing population.","objectives":[{"type":"buildings_level","level":30,"count":6,"description":"Have 6 buildings at level 30 or higher"}],"rewards":{"globalStability":10,"productionBonus":0.1}},{"id":5,"name":"Industrial Recovery","description":"Restore industrial capabilities and expand territorial control.","objectives":[{"type":"building_level","buildingId":"workshop","level":20,"description":"Build Workshop to level 20"},{"type":"provinces_secure","count":4,"description":"Secure 4 provinces"}],"rewards":{"globalStability":5,"supplies":50000}},{"id":6,"name":"Knowledge Renaissance","description":"Establish centers of learning to accelerate research and boost morale.","objectives":[{"type":"building_level","buildingId":"university","level":15,"description":"Build University to level 15"},{"type":"attribute","attribute":"morale","operator":">=","value":30,"description":"Achieve morale of 30 or higher"}],"rewards":{"globalStability":10,"morale":10}},{"id":7,"name":"Global Network","description":"Establish a global communication network and secure all territories.","objectives":[{"type":"building_level","buildingId":"satellite","level":20,"description":"Build Satellite Uplink to level 20"},{"type":"provinces_secure","count":6,"description":"Secure all 6 provinces"}],"rewards":{"globalStability":10,"eventReduction":0.2}},{"id":8,"name":"Serum Development","description":"Begin synthesizing the cure serum to end the outbreak once and for all.","objectives":[{"type":"building_exists","buildingId":"synthesis_station","description":"Build Serum Synthesis Station"},{"type":"serum_progress","value":50,"description":"Reach 50% serum synthesis progress"}],"rewards":{"globalStability":15,"serumBonus":0.25}},{"id":9,"name":"Rebirth","description":"Complete the serum and restore humanity to its former glory.","objectives":[{"type":"attribute","attribute":"globalStability","operator":">=","value":100,"description":"Achieve 100% global stability"},{"type":"attribute","attribute":"infectionRate","operator":"<","value":10,"description":"Reduce infection rate below 10%"},{"type":"serum_progress","value":100,"description":"Complete serum synthesis (100%)"}],"rewards":{"victory":true}}]')},3405:(e,t,i)=>{i.d(t,{T:()=>T});var n=i(5453),o=i(6786),s=i(9987),r=i(9041),a=i(9815),l=i(4428),c=i(6106),d=i(182);let u=JSON.parse('[{"id":"outbreak_local","type":"outbreak","name":"Local Outbreak","description":"A new outbreak has been detected in a nearby settlement. Immediate action is required.","triggerConditions":{"minInfectionRate":15,"randomChance":0.3},"choices":[{"id":"quarantine_strict","label":"Enforce Strict Quarantine","cost":{"supplies":500,"influence":50},"effects":[{"type":"attribute","target":"infectionRate","value":-3,"duration":300},{"type":"attribute","target":"morale","value":-5,"duration":180}],"reputationChange":-1},{"id":"medical_response","label":"Send Medical Team","cost":{"supplies":800,"knowledge":50},"effects":[{"type":"attribute","target":"infectionRate","value":-2,"duration":240},{"type":"attribute","target":"morale","value":3,"duration":180}],"reputationChange":1},{"id":"ignore","label":"Ignore (Risk Spread)","cost":{},"effects":[{"type":"attribute","target":"infectionRate","value":5,"duration":600},{"type":"attribute","target":"globalStability","value":-3,"duration":300}],"reputationChange":-2}],"frequency":600},{"id":"aid_request","type":"aid","name":"Aid Request","description":"A neighboring settlement is requesting assistance with supplies or personnel.","triggerConditions":{"randomChance":0.4},"choices":[{"id":"send_supplies","label":"Send Supplies","cost":{"supplies":1000},"effects":[{"type":"currency","target":"influence","value":1500,"duration":0},{"type":"attribute","target":"morale","value":5,"duration":300}],"reputationChange":2},{"id":"send_team","label":"Send Support Team","cost":{"survivors":10,"supplies":500},"effects":[{"type":"currency","target":"influence","value":200,"duration":0},{"type":"attribute","target":"morale","value":8,"duration":300}],"reputationChange":3},{"id":"decline","label":"Decline Request","cost":{},"effects":[{"type":"currency","target":"influence","value":-50,"duration":0},{"type":"attribute","target":"morale","value":-3,"duration":180}],"reputationChange":-1}],"frequency":720},{"id":"lab_incident","type":"incident","name":"Lab Incident","description":"A containment breach has occurred in one of your research facilities.","triggerConditions":{"requiredBuilding":"lab","randomChance":0.2},"choices":[{"id":"emergency_protocol","label":"Emergency Protocol","cost":{"knowledge":100,"supplies":300},"effects":[{"type":"attribute","target":"infectionRate","value":-1,"duration":120}],"reputationChange":0},{"id":"evacuate","label":"Evacuate Facility","cost":{"knowledge":200},"effects":[{"type":"attribute","target":"infectionRate","value":2,"duration":180},{"type":"attribute","target":"morale","value":-5,"duration":240}],"reputationChange":-1}],"frequency":900},{"id":"ethical_vaccine_test","type":"ethical","name":"Vaccine Testing Ethics","description":"Your scientists want to begin human trials for the vaccine. How should you proceed?","triggerConditions":{"minPhase":3,"randomChance":0.25},"choices":[{"id":"volunteer_only","label":"Volunteers Only","cost":{"knowledge":500},"effects":[{"type":"attribute","target":"morale","value":5,"duration":600}],"reputationChange":2},{"id":"mandatory_test","label":"Mandatory Testing","cost":{"knowledge":300,"influence":100},"effects":[{"type":"attribute","target":"infectionRate","value":-4,"duration":600},{"type":"attribute","target":"morale","value":-10,"duration":600}],"reputationChange":-3},{"id":"delay_testing","label":"Delay Testing","cost":{},"effects":[{"type":"attribute","target":"globalStability","value":-2,"duration":300}],"reputationChange":0}],"frequency":1200},{"id":"resource_shortage","type":"incident","name":"Resource Shortage","description":"Supply lines are strained. You must decide how to distribute limited resources.","triggerConditions":{"maxGlobalStability":40,"randomChance":0.35},"choices":[{"id":"ration_equally","label":"Equal Rationing","cost":{},"effects":[{"type":"attribute","target":"morale","value":3,"duration":300},{"type":"production","target":"all","value":-0.1,"duration":300}],"reputationChange":1},{"id":"prioritize_essential","label":"Prioritize Essential Services","cost":{},"effects":[{"type":"attribute","target":"morale","value":-5,"duration":300},{"type":"attribute","target":"globalStability","value":2,"duration":300}],"reputationChange":-1}],"frequency":800},{"id":"discovery_breakthrough","type":"discovery","name":"Scientific Breakthrough","description":"Your researchers have made a significant discovery. Should you share it with other settlements?","triggerConditions":{"requiredBuilding":"lab","minPhase":2,"randomChance":0.15},"choices":[{"id":"share_findings","label":"Share Findings","cost":{},"effects":[{"type":"currency","target":"influence","value":300,"duration":0},{"type":"attribute","target":"morale","value":10,"duration":600}],"reputationChange":3},{"id":"keep_secret","label":"Keep Secret","cost":{},"effects":[{"type":"currency","target":"knowledge","value":500,"duration":0},{"type":"attribute","target":"infectionRate","value":-3,"duration":600}],"reputationChange":-2}],"frequency":1500}]');var p=i(3105),f=i(4347),g=i(2115),m=i(3453),b=i(1284),v=i(1243),h=i(5778),y=i(3580),x=i(677);function w(e,t){if(!t)return;let{title:i,description:n,type:o,duration:s=5e3,navigateTo:r,actionLabel:a}=e,{component:l,iconClass:c,railClass:d}={success:{component:m.A,iconClass:"text-success",railClass:"before:bg-success/70"},info:{component:b.A,iconClass:"text-info",railClass:"before:bg-info/70"},warning:{component:v.A,iconClass:"text-warning",railClass:"before:bg-warning/70"},error:{component:h.A,iconClass:"text-danger",railClass:"before:bg-danger/70"}}[o],u=()=>{r&&window.location.assign(r)},p=r?(0,g.createElement)(x.Qg,{altText:null!=a?a:"Open",onClick:e=>{e.preventDefault(),e.stopPropagation(),u()}},null!=a?a:"Open"):void 0;if((0,y.oR)({variant:{success:"default",info:"default",warning:"destructive",error:"destructive"}[o],duration:s,onClick:r?u:void 0,action:p,className:"relative overflow-hidden border border-border/60 bg-surface-elevated/95 px-4 py-3 text-foreground shadow-xl backdrop-blur transition-colors before:absolute before:left-0 before:top-0 before:h-full before:w-1 ".concat(d," ").concat(r?"cursor-pointer hover:border-primary/40":""),title:(0,g.createElement)("div",{className:"flex items-start gap-3"},(0,g.createElement)(l,{className:"".concat(c," h-5 w-5 flex-shrink-0")}),(0,g.createElement)("div",{className:"space-y-1"},(0,g.createElement)("p",{className:"text-sm font-semibold"},i),n?(0,g.createElement)("p",{className:"text-xs text-muted-foreground"},n):null)),description:void 0}),"Notification"in window){if("granted"===Notification.permission)try{new Notification(i,{body:n,icon:"/favicon.ico",badge:"/favicon.ico"})}catch(e){console.log("[v0] Browser notification failed:",e)}else"denied"!==Notification.permission&&Notification.requestPermission()}}let k={missionCompleted:(e,t)=>({title:"Mission Completed",description:"".concat(e," mission successful! Gained ").concat(t),type:"success"}),missionFailed:(e,t)=>({title:"Mission Failed",description:"".concat(e," mission failed. Lost ").concat(t),type:"error"}),researchCompleted:e=>({title:"Research Complete",description:"".concat(e," research finished! New capabilities unlocked"),type:"success"}),newEvent:e=>({title:"New Event",description:"".concat(e," - Immediate attention required"),type:"warning",duration:8e3,navigateTo:"/events",actionLabel:"View Event"}),buildingCompleted:(e,t)=>({title:"Construction Complete",description:"".concat(e," upgraded to level ").concat(t),type:"success"}),provinceUnlocked:e=>({title:"Territory Expanded",description:"".concat(e," is now under your control"),type:"success"}),provinceStabilized:e=>({title:"Province Secured",description:"".concat(e," has been stabilized and is now safe"),type:"success"}),phaseCompleted:(e,t)=>({title:"Phase Complete",description:"".concat(e," (Phase ").concat(t,") objectives achieved!"),type:"success",duration:8e3}),criticalInfection:e=>({title:"CRITICAL: Infection at 100%",description:"Game Over in ".concat(e," seconds if infection remains at 100%"),type:"error",duration:1e4}),noSurvivors:e=>({title:"CRITICAL: Population Collapse",description:"Game Over in ".concat(e," seconds with zero survivors"),type:"error",duration:1e4}),lowStability:e=>({title:"CRITICAL: Stability Failure",description:"Game Over in ".concat(e," seconds if stability remains critical"),type:"error",duration:1e4}),multipleRedProvinces:()=>({title:"CRITICAL: Territory Loss",description:"5+ provinces in critical status - immediate action required!",type:"error",duration:1e4}),resourceStarvation:e=>({title:"CRITICAL: Resource Crisis",description:"Game Over in ".concat(e," seconds - cannot afford maintenance"),type:"error",duration:1e4})};var _=i(1981);let C={version:"1.7.1",lastSaved:Date.now(),totalPlayTime:0,lastTick:Date.now(),currencies:{survivors:15,supplies:300,knowledge:0,influence:0,ancestralData:0},resourceRates:{survivors:0,supplies:0,knowledge:0,influence:0},globalAttributes:{globalStability:50,infectionRate:10,containmentCoefficient:.1,morale:60},buildings:[],technologies:[],researchQueue:[],currentPhase:0,phaseProgress:{},provinces:[{id:"central_hub",unlocked:!0,status:"safe",stabilityLevel:100,stability:100,defenseLevel:0,outposts:{}}],activeEvents:[],eventHistory:[],eventStats:{lastSpawnAt:Date.now(),averageInterval:18e4},nextEventSpawnAt:Date.now()+18e4,activeMissions:[],temporaryEffects:{attributes:[],production:[]},serumProgress:0,serumRecipes:[],ancestralData:0,prestigeLevel:0,prestigeUpgrades:[],settings:{animationSpeed:1,numberFormat:"short",autoSave:!0,notifications:!0},reputation:0,ethicalChoices:{},tutorialDismissed:!1,patchNotesVersionViewed:null,gameOver:!1,gameOverReason:null,warningState:{criticalInfection:!1,noSurvivors:!1,collapsedStability:!1,multipleRedProvinces:!1,resourceStarvation:!1},crisisCounters:{infectionAt100Ticks:0,zeroSurvivorsTicks:0,lowStabilityTicks:0,redProvinceCount:0,negativeResourceTicks:0}},S=(0,_.yC)(r),N=e=>JSON.parse(JSON.stringify(e)),j=(e,t)=>Math.min(3e5,Math.max(12e4,18e4+5e3*Math.max(-5,Math.min(5,e))+2e4*t)),E=(e,t)=>{var i,n;let o=null!==(n=null===(i=e.triggerConditions)||void 0===i?void 0:i.randomChance)&&void 0!==n?n:.2,s=1;return"aid"===e.type||"discovery"===e.type?s+=Math.max(-.5,Math.min(.5,.05*t)):("outbreak"===e.type||"incident"===e.type)&&(s-=Math.max(-.5,Math.min(.5,.05*t))),o*(s=Math.max(.1,s))},A=(e,t)=>{let i=Math.max(0,Math.floor(e)),n=!1,o=t.map(e=>{if(!1===e.active)return 0!==e.workers?(n=!0,{...e,workers:0}):e;let t=Math.min(e.workers,i);return(i-=t,t===e.workers)?e:(n=!0,{...e,workers:t})});return n?o:t},R=e=>N({version:e.version,lastSaved:Date.now(),totalPlayTime:e.totalPlayTime,lastTick:Date.now(),currencies:e.currencies,resourceRates:e.resourceRates,globalAttributes:e.globalAttributes,buildings:e.buildings,technologies:e.technologies,researchQueue:e.researchQueue,currentPhase:e.currentPhase,phaseProgress:e.phaseProgress,provinces:e.provinces,activeEvents:e.activeEvents,eventHistory:e.eventHistory,eventStats:e.eventStats,nextEventSpawnAt:e.nextEventSpawnAt,activeMissions:e.activeMissions,temporaryEffects:e.temporaryEffects,serumProgress:e.serumProgress,serumRecipes:e.serumRecipes,ancestralData:e.ancestralData,prestigeLevel:e.prestigeLevel,prestigeUpgrades:e.prestigeUpgrades,settings:e.settings,reputation:e.reputation,ethicalChoices:e.ethicalChoices,tutorialDismissed:e.tutorialDismissed,patchNotesVersionViewed:e.patchNotesVersionViewed,gameOver:e.gameOver,gameOverReason:e.gameOverReason,warningState:e.warningState,crisisCounters:e.crisisCounters}),I=e=>{var t,i,n,o,s,r,a,l,c,d,u,p,f,g,m;let b={...C,...e,currencies:{...C.currencies,...null!==(s=null==e?void 0:e.currencies)&&void 0!==s?s:{}},resourceRates:{...C.resourceRates,...null!==(r=null==e?void 0:e.resourceRates)&&void 0!==r?r:{}},globalAttributes:{...C.globalAttributes,...null!==(a=null==e?void 0:e.globalAttributes)&&void 0!==a?a:{}},buildings:(null==e?void 0:e.buildings)?[...e.buildings]:[...C.buildings],technologies:(null==e?void 0:e.technologies)?[...e.technologies]:[...C.technologies],researchQueue:(null==e?void 0:e.researchQueue)?[...e.researchQueue]:[...C.researchQueue],phaseProgress:{...C.phaseProgress,...null!==(l=null==e?void 0:e.phaseProgress)&&void 0!==l?l:{}},provinces:(null==e?void 0:e.provinces)?e.provinces.map(e=>{var t,i,n;return{...e,stability:null!==(i=null!==(t=e.stability)&&void 0!==t?t:e.stabilityLevel)&&void 0!==i?i:100,defenseLevel:null!==(n=e.defenseLevel)&&void 0!==n?n:0}}):[...C.provinces],activeEvents:(null==e?void 0:e.activeEvents)?[...e.activeEvents]:[],eventHistory:(null==e?void 0:e.eventHistory)?[...e.eventHistory]:[],activeMissions:(null==e?void 0:e.activeMissions)?[...e.activeMissions]:[],temporaryEffects:{attributes:(null!==(c=null==e?void 0:null===(t=e.temporaryEffects)||void 0===t?void 0:t.attributes)&&void 0!==c?c:[]).map((e,t)=>{var i;if(!(null==e?void 0:e.target))return null;let n=e.target;return n in C.globalAttributes?{id:null!==(i=e.id)&&void 0!==i?i:"attr-".concat(t,"-").concat(e.target),target:n,value:"number"==typeof e.value?e.value:0,expiresAt:"number"==typeof e.expiresAt?e.expiresAt:Date.now()}:null}).filter(e=>null!==e),production:(null!==(d=null==e?void 0:null===(i=e.temporaryEffects)||void 0===i?void 0:i.production)&&void 0!==d?d:[]).map((e,t)=>{var i;let n=(null==e?void 0:e.target)?String(e.target):"all";return{id:null!==(i=null==e?void 0:e.id)&&void 0!==i?i:"prod-".concat(t,"-").concat(n),target:n,value:"number"==typeof(null==e?void 0:e.value)?e.value:0,expiresAt:"number"==typeof(null==e?void 0:e.expiresAt)?e.expiresAt:Date.now()}}).filter(e=>Number.isFinite(e.expiresAt))},serumRecipes:(null==e?void 0:e.serumRecipes)?[...e.serumRecipes]:[],prestigeUpgrades:(null==e?void 0:e.prestigeUpgrades)?[...e.prestigeUpgrades]:[],settings:{...C.settings,...null!==(u=null==e?void 0:e.settings)&&void 0!==u?u:{}},warningState:{...C.warningState,...null!==(p=null==e?void 0:e.warningState)&&void 0!==p?p:{}},crisisCounters:{...C.crisisCounters,...null!==(f=null==e?void 0:e.crisisCounters)&&void 0!==f?f:{}},ethicalChoices:{...C.ethicalChoices,...null!==(g=null==e?void 0:e.ethicalChoices)&&void 0!==g?g:{}},patchNotesVersionViewed:"string"==typeof(null==e?void 0:e.patchNotesVersionViewed)?e.patchNotesVersionViewed:null,eventStats:{lastSpawnAt:"number"==typeof(null==e?void 0:null===(n=e.eventStats)||void 0===n?void 0:n.lastSpawnAt)?e.eventStats.lastSpawnAt:Date.now(),averageInterval:"number"==typeof(null==e?void 0:null===(o=e.eventStats)||void 0===o?void 0:o.averageInterval)?Math.min(3e5,Math.max(12e4,e.eventStats.averageInterval)):18e4},nextEventSpawnAt:"number"==typeof(null==e?void 0:e.nextEventSpawnAt)?e.nextEventSpawnAt:Date.now()+18e4};return b.version="string"==typeof(null==e?void 0:e.version)?e.version:C.version,b.totalPlayTime="number"==typeof(null==e?void 0:e.totalPlayTime)?e.totalPlayTime:C.totalPlayTime,b.lastSaved="number"==typeof(null==e?void 0:e.lastSaved)?e.lastSaved:Date.now(),b.lastTick=Date.now(),b.gameOver="boolean"==typeof(null==e?void 0:e.gameOver)?e.gameOver:C.gameOver,b.gameOverReason=null!==(m=null==e?void 0:e.gameOverReason)&&void 0!==m?m:null,b.ancestralData="number"==typeof(null==e?void 0:e.ancestralData)?e.ancestralData:C.ancestralData,b.prestigeLevel="number"==typeof(null==e?void 0:e.prestigeLevel)?e.prestigeLevel:C.prestigeLevel,b.serumProgress="number"==typeof(null==e?void 0:e.serumProgress)?e.serumProgress:C.serumProgress,b.currentPhase="number"==typeof(null==e?void 0:e.currentPhase)?e.currentPhase:C.currentPhase,b.reputation="number"==typeof(null==e?void 0:e.reputation)?e.reputation:C.reputation,b.nextEventSpawnAt=Math.max(Date.now(),b.nextEventSpawnAt),N(b)},T=(0,n.v)()((0,o.Zr)((e,t)=>({...C,tick:()=>{let i=t();if(i.gameOver)return;let n=Date.now(),o=(n-i.lastTick)/1e3,s=i.temporaryEffects.attributes.filter(e=>e.expiresAt<=n);s.length>0&&(s.forEach(e=>{let i=t().globalAttributes[e.target];t().updateGlobalAttribute(e.target,i-e.value)}),e(e=>({temporaryEffects:{...e.temporaryEffects,attributes:e.temporaryEffects.attributes.filter(e=>e.expiresAt>n)}})),i=t()),i.temporaryEffects.production.some(e=>e.expiresAt<=n)&&(e(e=>({temporaryEffects:{...e.temporaryEffects,production:e.temporaryEffects.production.filter(e=>e.expiresAt>n)}})),i=t());let a=i.temporaryEffects.production.filter(e=>e.expiresAt>n),c=(0,f.v)(i.ancestralData),u=0,p=0,g=0,m=0,b=t().calculateMaintenanceCosts(),v=0,h=0;i.provinces.forEach(e=>{if(e.unlocked){let t=d.find(t=>t.id===e.id);if(t&&t.maintenanceCost){let e=t.maintenanceCost;v+=(e.supplies||0)*o,h+=(e.influence||0)*o}}}),i.buildings.forEach(e=>{if(!1===e.active)return;let t=r.find(t=>t.id===e.id);if(!t)return;let o=(0,_.zh)(a,e.id,n),s=(0,_.Xk)(e,t,c,o,i.technologies);s.survivors&&(u+=s.survivors),s.supplies&&(p+=s.supplies),s.knowledge&&(g+=s.knowledge),s.influence&&(m+=s.influence)});let y=0,x=0,C=0,S=0,N=0;if(i.buildings.forEach(e=>{if(!1===e.active||0===e.level)return;let t=r.find(t=>t.id===e.id);if(!t||!t.effects)return;let i=t.effects;i.productionBonus&&(y+=i.productionBonus*e.level),i.serumProduction&&(x+=i.serumProduction*e.level*(1+.01*e.workers)),i.morale&&(C+=i.morale*e.level),i.containmentCoefficient&&(S+=i.containmentCoefficient*e.level),i.infectionRate&&(N+=i.infectionRate*e.level)}),y>0){let e=1+y;u*=e,p*=e,g*=e,m*=e}(0!==C||0!==S||0!==N)&&e(e=>({globalAttributes:{...e.globalAttributes,morale:Math.max(0,Math.min(100,e.globalAttributes.morale+C*o*.1)),containmentCoefficient:Math.max(0,e.globalAttributes.containmentCoefficient+S*o*.001),infectionRate:Math.max(0,e.globalAttributes.infectionRate+N*o*.1)}}));let j=i.currencies.supplies>=(b.supplies||0);if(!j&&i.currencies.supplies<0?e(e=>({globalAttributes:{...e.globalAttributes,morale:Math.max(0,e.globalAttributes.morale-2*o),globalStability:Math.max(0,e.globalAttributes.globalStability-+o)},crisisCounters:{...e.crisisCounters,negativeResourceTicks:e.crisisCounters.negativeResourceTicks+1}})):j&&(b.supplies&&(p-=b.supplies),i.crisisCounters.negativeResourceTicks>0&&e(e=>({crisisCounters:{...e.crisisCounters,negativeResourceTicks:Math.max(0,e.crisisCounters.negativeResourceTicks-2)}}))),i.researchQueue.length>0){let n=i.researchQueue[0],s=i.technologies.find(e=>e.id===n),r=l.find(e=>e.id===n);if(s&&r&&!s.researched){let a=s.researchProgress+o*c.researchSpeedMultiplier;if(a>=r.researchTime){if(w(k.researchCompleted(r.name),i.settings.notifications),e(e=>({technologies:e.technologies.map(e=>e.id===n?{...e,researched:!0,researchProgress:r.researchTime}:e),researchQueue:e.researchQueue.filter(e=>e!==n)})),r.effects.globalEffects){let n=r.effects.globalEffects;n.globalStability&&t().updateGlobalAttribute("globalStability",i.globalAttributes.globalStability+n.globalStability),n.infectionRate&&e(e=>({globalAttributes:{...e.globalAttributes,infectionRate:Math.max(0,e.globalAttributes.infectionRate+n.infectionRate)}})),n.containmentCoefficient&&e(e=>({globalAttributes:{...e.globalAttributes,containmentCoefficient:e.globalAttributes.containmentCoefficient+n.containmentCoefficient}}))}console.log("[v0] Research completed:",n)}else e(e=>({technologies:e.technologies.map(e=>e.id===n?{...e,researchProgress:a}:e)}))}}i.activeMissions.forEach(e=>{n-e.startTime>=e.duration&&t().completeMission(e.id)});let E=i.activeEvents.filter(e=>e.expiresAt<=n);E.length>0&&E.forEach(e=>{var i;let n=null!==(i=e.choices.find(e=>"decline"===e.id))&&void 0!==i?i:e.choices[0];n&&t().handleEventChoice(e.id,n.id)}),n>=i.nextEventSpawnAt&&t().checkAndSpawnEvents(),e(e=>({activeEvents:e.activeEvents.filter(e=>e.expiresAt>n)})),e(e=>{let t=Math.max(0,e.currencies.survivors+u*o),i=Math.max(0,e.currencies.supplies+p*o-v),s=Math.max(0,e.currencies.knowledge+g*o),r=Math.max(0,e.currencies.influence+m*o-h),a=Math.min(100,e.serumProgress+x*o),l=A(t,e.buildings);return{currencies:{...e.currencies,survivors:t,supplies:i,knowledge:s,influence:r},buildings:l,resourceRates:{survivors:u,supplies:p-v/o,knowledge:g,influence:m-h/o},serumProgress:a,lastTick:n,totalPlayTime:e.totalPlayTime+o}});let R=i.provinces.map(e=>{var t,n;if(!e.unlocked)return e;let s=d.find(t=>t.id===e.id);if(!s)return e;let r=null!==(t=e.stability)&&void 0!==t?t:100,a=null!==(n=e.defenseLevel)&&void 0!==n?n:0,l=(s.decayRate||.05)*o,c=i.globalAttributes.infectionRate/100*.1*o,u=r-(l+c)*(1-Math.min(.01*a,.5));i.globalAttributes.morale>70&&(u+=.02*o),u+=.05*i.globalAttributes.containmentCoefficient*o,u=Math.max(0,Math.min(100,u));let p=e.status;return p=u>=70?"safe":u>=35?"unstable":"red",{...e,stability:u,status:p,defenseLevel:a}});e({provinces:R});let I=-i.globalAttributes.containmentCoefficient*o*.1;I+=.15*R.filter(e=>e.unlocked&&"red"===e.status).length*o+.05*R.filter(e=>e.unlocked&&"unstable"===e.status).length*o,i.globalAttributes.morale<30&&(I+=.1*o);let T=Math.max(0,Math.min(100,i.globalAttributes.infectionRate+I)),M=(i.globalAttributes.morale/100-T/100)*o*.5,P=Math.max(0,Math.min(100,i.globalAttributes.globalStability+M));e(e=>({globalAttributes:{...e.globalAttributes,infectionRate:T,globalStability:P}})),t().checkPhaseObjectives(),t().checkGameOverConditions()},addCurrency:(t,i)=>{e(e=>{let n=e.currencies[t]+i,o={...e.currencies,[t]:n};return"survivors"===t?{currencies:o,buildings:A(n,e.buildings)}:{currencies:o}})},spendCurrency:(i,n)=>t().currencies[i]>=n&&(e(e=>{let t=e.currencies[i]-n,o={...e.currencies,[i]:t};return"survivors"===i?{currencies:o,buildings:A(t,e.buildings)}:{currencies:o}}),!0),canAfford:e=>{let i=t();return Object.entries(e).every(e=>{let[t,n]=e;return i.currencies[t]>=(n||0)})},updateGlobalAttribute:(t,i)=>{e(e=>({globalAttributes:{...e.globalAttributes,[t]:Math.max(0,Math.min(100,i))}}))},buyBuilding:i=>{let n=t(),o=r.find(e=>e.id===i);if(!o)return console.log("[v0] Building not found:",i),!1;let a=n.buildings.find(e=>e.id===i),l=a?a.level:0,c=(0,f.v)(n.ancestralData),d=0;a&&(d=(0,_.TR)(a));let u=(1-c.costReduction)*(1-d),p={};return(o.baseCost.survivors&&(p.survivors=Math.floor((0,s.yN)(o.baseCost.survivors,l,o.costMultiplier)*u)),o.baseCost.supplies&&(p.supplies=Math.floor((0,s.yN)(o.baseCost.supplies,l,o.costMultiplier)*u)),o.baseCost.knowledge&&(p.knowledge=Math.floor((0,s.yN)(o.baseCost.knowledge,l,o.costMultiplier)*u)),o.baseCost.influence&&(p.influence=Math.floor((0,s.yN)(o.baseCost.influence,l,o.costMultiplier)*u)),n.canAfford(p))?(Object.entries(p).forEach(e=>{let[t,i]=e;n.spendCurrency(t,i||0)}),a?(e(e=>({buildings:e.buildings.map(e=>e.id===i?{...e,level:e.level+1}:e)})),w(k.buildingCompleted(o.name,l+1),n.settings.notifications)):(e(e=>({buildings:[...e.buildings,{id:i,level:1,workers:0,upgrades:[],active:!0}]})),w(k.buildingCompleted(o.name,1),n.settings.notifications)),console.log("[v0] Building purchased:",i,"Level:",l+1),!0):(console.log("[v0] Cannot afford building:",i,p),!1)},upgradeBuilding:(i,n)=>{let o=t(),s=a.find(e=>e.id===n);if(!s)return console.log("[v0] Upgrade not found:",n),!1;let r=o.buildings.find(e=>e.id===i);if(!r)return console.log("[v0] Building not found:",i),!1;if(r.upgrades.includes(n))return console.log("[v0] Upgrade already purchased:",n),!1;if(s.unlockCondition){if(s.unlockCondition.buildingLevel&&r.level<s.unlockCondition.buildingLevel)return console.log("[v0] Building level too low for upgrade"),!1;if(s.unlockCondition.technology){let e=o.technologies.find(e=>{var t;return e.id===(null===(t=s.unlockCondition)||void 0===t?void 0:t.technology)});if(!e||!e.researched)return console.log("[v0] Required technology not researched"),!1}}let l={supplies:s.cost.supplies||0,knowledge:s.cost.knowledge||0,influence:s.cost.influence||0};if(!o.canAfford(l))return console.log("[v0] Cannot afford upgrade:",n,l),!1;if(Object.entries(l).forEach(e=>{let[t,i]=e;i&&o.spendCurrency(t,i)}),e(e=>({buildings:e.buildings.map(e=>e.id===i?{...e,upgrades:[...e.upgrades,n]}:e)})),s.effects.globalStability){let e=o.globalAttributes.globalStability+s.effects.globalStability;o.updateGlobalAttribute("globalStability",e)}if(s.effects.infectionRate){let t=o.globalAttributes.infectionRate+s.effects.infectionRate;e(e=>({globalAttributes:{...e.globalAttributes,infectionRate:Math.max(0,t)}}))}if(s.effects.morale){let e=o.globalAttributes.morale+s.effects.morale;o.updateGlobalAttribute("morale",e)}return console.log("[v0] Upgrade purchased:",n),!0},assignWorkers:(i,n)=>{let o=t(),s=o.buildings.find(e=>e.id===i);if(!s)return;let a=r.find(e=>e.id===i);if(!a)return;let l=a.workerCapacity*s.level,c=o.buildings.reduce((e,t)=>t.id===i?e:e+t.workers,0),d=Math.min(n,l,Math.max(0,Math.floor(o.currencies.survivors)-c));e(e=>({buildings:e.buildings.map(e=>e.id===i?{...e,workers:d,active:d>0||e.active}:e)}))},setBuildingActive:(t,i)=>{e(e=>({buildings:e.buildings.map(e=>e.id===t?{...e,active:i,workers:i?e.workers:0}:e)}))},startResearch:i=>{let n=t(),o=l.find(e=>e.id===i);if(!o)return console.log("[v0] Technology not found:",i),!1;let s=n.technologies.find(e=>e.id===i);if(null==s?void 0:s.researched)return console.log("[v0] Technology already researched:",i),!1;if(n.researchQueue.includes(i))return console.log("[v0] Technology already in queue:",i),!1;if(n.researchQueue.length>=3)return console.log("[v0] Research queue is full"),!1;if(!o.prerequisites.every(e=>{let t=n.technologies.find(t=>t.id===e);return null==t?void 0:t.researched}))return console.log("[v0] Prerequisites not met for:",i),!1;let r={knowledge:o.cost.knowledge,supplies:o.cost.supplies||0};return n.canAfford(r)?(Object.entries(r).forEach(e=>{let[t,i]=e;i&&n.spendCurrency(t,i)}),s?e(e=>({researchQueue:[...e.researchQueue,i]})):e(e=>({technologies:[...e.technologies,{id:i,researched:!1,researchProgress:0,subUpgrades:[]}],researchQueue:[...e.researchQueue,i]})),console.log("[v0] Research started:",i),!0):(console.log("[v0] Cannot afford research:",i,r),!1)},cancelResearch:t=>{e(e=>({researchQueue:e.researchQueue.filter(e=>e!==t)})),console.log("[v0] Research cancelled:",t)},purchaseSubUpgrade:(i,n)=>{var o;let s=t(),r=c.find(e=>e.id===n);if(!r)return console.log("[v0] Sub-upgrade not found:",n),!1;let a=s.technologies.find(e=>e.id===i);if(!a||!a.researched)return console.log("[v0] Parent technology not researched:",i),!1;if(null===(o=a.subUpgrades)||void 0===o?void 0:o.includes(n))return console.log("[v0] Sub-upgrade already purchased:",n),!1;let l={knowledge:r.cost.knowledge,supplies:r.cost.supplies||0};if(!s.canAfford(l))return console.log("[v0] Cannot afford sub-upgrade:",n,l),!1;if(Object.entries(l).forEach(e=>{let[t,i]=e;i&&s.spendCurrency(t,i)}),e(e=>({technologies:e.technologies.map(e=>e.id===i?{...e,subUpgrades:[...e.subUpgrades||[],n]}:e)})),r.effects.globalEffects){let i=r.effects.globalEffects;i.globalStability&&t().updateGlobalAttribute("globalStability",s.globalAttributes.globalStability+i.globalStability),i.infectionRate&&e(e=>({globalAttributes:{...e.globalAttributes,infectionRate:Math.max(0,e.globalAttributes.infectionRate+i.infectionRate)}})),i.containmentCoefficient&&e(e=>({globalAttributes:{...e.globalAttributes,containmentCoefficient:e.globalAttributes.containmentCoefficient+i.containmentCoefficient}})),i.morale&&t().updateGlobalAttribute("morale",s.globalAttributes.morale+i.morale)}return console.log("[v0] Sub-upgrade purchased:",n),!0},unlockProvince:i=>{let n=t(),o=d.find(e=>e.id===i);if(!o)return console.log("[v0] Province not found:",i),!1;let s=n.provinces.find(e=>e.id===i);if(null==s?void 0:s.unlocked)return console.log("[v0] Province already unlocked:",i),!1;if(o.unlockCost>0&&n.currencies.influence<o.unlockCost)return console.log("[v0] Cannot afford province unlock:",i),!1;if(o.unlockCost>0&&n.spendCurrency("influence",o.unlockCost),s)e(e=>({provinces:e.provinces.map(e=>e.id===i?{...e,unlocked:!0}:e)}));else{let t="safe"===o.initialStatus?100:50*("unstable"===o.initialStatus);e(e=>({provinces:[...e.provinces,{id:i,unlocked:!0,status:o.initialStatus,stability:t,stabilityLevel:t,defenseLevel:0,outposts:{}}]}))}if(w(k.provinceUnlocked(o.name),n.settings.notifications),"safe"===o.initialStatus&&o.bonuses.globalStability){let e=n.globalAttributes.globalStability+o.bonuses.globalStability;t().updateGlobalAttribute("globalStability",e)}return console.log("[v0] Province unlocked:",i),!0},stabilizeProvince:i=>{let n=t(),o=d.find(e=>e.id===i);if(!o)return console.log("[v0] Province not found:",i),!1;let s=n.provinces.find(e=>e.id===i);if(!s||!s.unlocked)return console.log("[v0] Province not unlocked:",i),!1;if("safe"===s.status)return console.log("[v0] Province already safe:",i),!1;let r=o.stabilizationCost;if(n.currencies.supplies<r.supplies||n.currencies.influence<r.influence)return console.log("[v0] Cannot afford stabilization:",i),!1;n.spendCurrency("supplies",r.supplies),n.spendCurrency("influence",r.influence);let a="red"===s.status?"unstable":"safe",l="safe"===a?100:50;if(e(e=>({provinces:e.provinces.map(e=>e.id===i?{...e,status:a,stability:l,stabilityLevel:l}:e)})),"safe"===a&&w(k.provinceStabilized(o.name),n.settings.notifications),"safe"===a){if(o.bonuses.globalStability){let e=n.globalAttributes.globalStability+o.bonuses.globalStability;t().updateGlobalAttribute("globalStability",e)}if(o.bonuses.containmentCoefficient&&e(e=>({globalAttributes:{...e.globalAttributes,containmentCoefficient:e.globalAttributes.containmentCoefficient+o.bonuses.containmentCoefficient}})),o.bonuses.morale){let e=n.globalAttributes.morale+o.bonuses.morale;t().updateGlobalAttribute("morale",e)}}return console.log("[v0] Province stabilized:",i,"New status:",a),!0},reinforceProvince:i=>{var n;let o=t(),s=d.find(e=>e.id===i);if(!s)return console.log("[v0] Province not found:",i),!1;let r=o.provinces.find(e=>e.id===i);if(!r||!r.unlocked)return console.log("[v0] Province not unlocked:",i),!1;let a=null!==(n=r.defenseLevel)&&void 0!==n?n:0,l={supplies:500,influence:50},c={supplies:Math.floor(l.supplies*Math.pow(1.2,a)),influence:Math.floor(l.influence*Math.pow(1.2,a))};return o.currencies.supplies<c.supplies||o.currencies.influence<c.influence?(console.log("[v0] Cannot afford reinforcement:",i),!1):(o.spendCurrency("supplies",c.supplies),o.spendCurrency("influence",c.influence),e(e=>({provinces:e.provinces.map(e=>e.id===i?{...e,defenseLevel:a+1}:e)})),w({title:"Territory Reinforced",message:"".concat(s.name," defense increased to level ").concat(a+1),type:"success"},o.settings.notifications),console.log("[v0] Province reinforced:",i,"Defense level:",a+1),!0)},saveGame:e=>{try{let i=R(t());localStorage.setItem("outbreak-save-".concat(e),JSON.stringify(i)),console.log("[v0] Game saved to slot:",e)}catch(e){console.error("[v0] Failed to save game:",e)}},loadGame:t=>{try{let i=localStorage.getItem("outbreak-save-".concat(t));if(!i){console.warn("[v0] No save found for slot:",t);return}let n=JSON.parse(i),o=I(n);e(e=>({...e,...o})),console.log("[v0] Game loaded from slot:",t)}catch(e){console.error("[v0] Failed to load game:",e)}},exportGame:e=>{try{if("number"==typeof e){let t=localStorage.getItem("outbreak-save-".concat(e));if(t)return t}let i=R(t());return JSON.stringify(i,null,2)}catch(e){return console.error("[v0] Failed to export game:",e),null}},importGame:(t,i)=>{try{let n=JSON.parse(t),o=I(n);return e(e=>({...e,...o})),"number"==typeof i&&localStorage.setItem("outbreak-save-".concat(i),JSON.stringify(o)),console.log("[v0] Game imported successfully"),!0}catch(e){return console.error("[v0] Failed to import game:",e),!1}},resetGame:()=>{e(C),console.log("[v0] Game reset")},spawnEvent:i=>{let n=t(),o=u.find(e=>e.id===i);if(!o){console.log("[v0] Event not found:",i);return}if(n.activeEvents.some(e=>e.id===i)){console.log("[v0] Event already active:",i);return}let s={id:o.id,type:o.type,title:o.name,description:o.description,choices:o.choices.map(e=>({id:e.id,label:e.label,cost:e.cost,effects:e.effects})),expiresAt:Date.now()+3e5};e(e=>({activeEvents:[...e.activeEvents,s]})),w(k.newEvent(o.name),n.settings.notifications),console.log("[v0] Event spawned:",i)},handleEventChoice:(i,n)=>{let o=t(),s=o.activeEvents.find(e=>e.id===i);if(!s){console.log("[v0] Event not found:",i);return}let r=s.choices.find(e=>e.id===n);if(!r){console.log("[v0] Choice not found:",n);return}if(r.cost){if(!((!r.cost.survivors||o.currencies.survivors>=r.cost.survivors)&&(!r.cost.supplies||o.currencies.supplies>=r.cost.supplies)&&(!r.cost.knowledge||o.currencies.knowledge>=r.cost.knowledge)&&(!r.cost.influence||o.currencies.influence>=r.cost.influence))){console.log("[v0] Cannot afford choice:",n);return}r.cost.survivors&&t().spendCurrency("survivors",r.cost.survivors),r.cost.supplies&&t().spendCurrency("supplies",r.cost.supplies),r.cost.knowledge&&t().spendCurrency("knowledge",r.cost.knowledge),r.cost.influence&&t().spendCurrency("influence",r.cost.influence)}r.effects.forEach((o,s)=>{if("currency"===o.type)t().addCurrency(o.target,o.value);else if("attribute"===o.type){let r=o.target,a=t().globalAttributes[r];if(t().updateGlobalAttribute(r,a+o.value),o.duration&&o.duration>0){let t="".concat(i,"-").concat(n,"-").concat(s),a=Date.now()+1e3*o.duration;e(e=>({temporaryEffects:{...e.temporaryEffects,attributes:[...e.temporaryEffects.attributes.filter(e=>e.id!==t),{id:t,target:r,value:o.value,expiresAt:a}]}}))}}else if("production"===o.type){let t=o.duration&&o.duration>0?Date.now()+1e3*o.duration:Number.MAX_SAFE_INTEGER,r="".concat(i,"-").concat(n,"-").concat(s);e(e=>({temporaryEffects:{...e.temporaryEffects,production:[...e.temporaryEffects.production.filter(e=>e.id!==r),{id:r,target:o.target||"all",value:o.value,expiresAt:t}]}}))}});let a=s.choices.find(e=>e.id===n);(null==a?void 0:a.reputationChange)&&e(e=>({reputation:e.reputation+a.reputationChange})),e(e=>({ethicalChoices:{...e.ethicalChoices,[i]:n}})),e(e=>({activeEvents:e.activeEvents.filter(e=>e.id!==i),eventHistory:[...e.eventHistory,i]})),console.log("[v0] Event choice handled:",i,n)},checkAndSpawnEvents:()=>{let i=t(),n=Date.now(),o=()=>{let i=t();e({nextEventSpawnAt:n+j(i.reputation,i.activeEvents.length)})};if(i.activeEvents.length>=3){o();return}let s=u.filter(e=>{if(i.activeEvents.some(t=>t.id===e.id))return!1;let t=e.triggerConditions||{};return(!t.minPhase||!(i.currentPhase<t.minPhase))&&(!t.minInfectionRate||!(i.globalAttributes.infectionRate<t.minInfectionRate))&&(!t.maxGlobalStability||!(i.globalAttributes.globalStability>t.maxGlobalStability))&&(!t.requiredBuilding||!!i.buildings.some(e=>e.id===t.requiredBuilding))});if(0===s.length){o();return}let r=s.map(e=>E(e,i.reputation)),a=r.reduce((e,t)=>e+t,0);if(a<=0){o();return}let l=Math.random()*a,c=null;for(let e=0;e<s.length;e+=1)if((l-=r[e])<=0){c=s[e];break}if(!c){o();return}let d=i.eventStats;t().spawnEvent(c.id);let p=Math.max(0,n-d.lastSpawnAt),f=p>0?Math.round(.7*d.averageInterval+.3*p):d.averageInterval;e(e=>({eventStats:{lastSpawnAt:n,averageInterval:Math.min(3e5,Math.max(12e4,f))}})),o()},startMission:i=>{let n=t(),{missionId:o,name:s,duration:r,assignedSurvivors:a,risk:l,cost:c,rewards:d}=i;if(n.activeMissions.length>=3)return console.log("[v0] Maximum missions active"),!1;if(n.currencies.survivors<a)return console.log("[v0] Not enough survivors"),!1;if(c){if(c.supplies&&n.currencies.supplies<c.supplies)return console.log("[v0] Not enough supplies for mission"),!1;if(c.influence&&n.currencies.influence<c.influence)return console.log("[v0] Not enough influence for mission"),!1;if(c.knowledge&&n.currencies.knowledge<c.knowledge)return console.log("[v0] Not enough knowledge for mission"),!1}t().spendCurrency("survivors",a),c&&(c.supplies&&t().spendCurrency("supplies",c.supplies),c.influence&&t().spendCurrency("influence",c.influence),c.knowledge&&t().spendCurrency("knowledge",c.knowledge));let u={id:"".concat(o,"-").concat(Date.now()),templateId:o,name:s,assignedSurvivors:a,risk:l,startTime:Date.now(),duration:1e3*r,cost:c,rewards:d,completed:!1};return e(e=>({activeMissions:[...e.activeMissions,u]})),console.log("[v0] Mission started:",o),!0},cancelMission:i=>{let n=t().activeMissions.find(e=>e.id===i);if(!n){console.log("[v0] Mission not found:",i);return}t().addCurrency("survivors",n.assignedSurvivors),n.cost&&(n.cost.supplies&&t().addCurrency("supplies",n.cost.supplies),n.cost.influence&&t().addCurrency("influence",n.cost.influence),n.cost.knowledge&&t().addCurrency("knowledge",n.cost.knowledge)),e(e=>({activeMissions:e.activeMissions.filter(e=>e.id!==i)})),console.log("[v0] Mission cancelled:",i)},completeMission:i=>{let n=t(),o=n.activeMissions.find(e=>e.id===i);if(!o){console.log("[v0] Mission not found:",i);return}let r=100*Math.random()>o.risk;if(r){t().addCurrency("survivors",o.assignedSurvivors);let e=Object.entries(o.rewards||{});e.forEach(e=>{let[i,n]=e;t().addCurrency(i,n||0)});let i=e.length>0?e.map(e=>{let[t,i]=e;return"+".concat((0,s.ZV)(i||0)," ").concat(t)}).join(", "):"mission bonuses applied";w(k.missionCompleted(o.name,i),n.settings.notifications)}else{let e=Math.floor(.3*o.assignedSurvivors);t().addCurrency("survivors",o.assignedSurvivors-e),w(k.missionFailed(o.name,"".concat(e," survivors")),n.settings.notifications)}e(e=>({activeMissions:e.activeMissions.filter(e=>e.id!==i)})),console.log("[v0] Mission completed:",i,"Success:",r)},synthesizeSerum:(i,n,o)=>{let s=t(),r={basic:{knowledge:1e3,supplies:5e4,influence:2e3},advanced:{knowledge:2e3,supplies:8e4,influence:3e3},optimized:{knowledge:1500,supplies:6e4,influence:2500}}[i];if(!r)return console.log("[v0] Invalid recipe ID:",i),!1;let a={knowledge:r.knowledge,supplies:r.supplies,influence:r.influence};return s.canAfford(a)?(Object.entries(a).forEach(e=>{let[i,n]=e;t().spendCurrency(i,n||0)}),100*Math.random()>o?(e(e=>({serumProgress:Math.min(100,e.serumProgress+n)})),w({title:"Serum Synthesis Successful",message:"Serum progress increased by +".concat(n,"%"),type:"success"},s.settings.notifications),console.log("[v0] Serum synthesis successful:",i,"+",n,"progress")):(w({title:"Synthesis Failed",message:"The synthesis attempt failed. Resources were consumed but no progress was made.",type:"warning"},s.settings.notifications),console.log("[v0] Serum synthesis failed:",i)),!0):(console.log("[v0] Cannot afford serum synthesis:",i,a),!1)},checkPhaseObjectives:()=>{let e=t(),i=p[e.currentPhase];i&&i.objectives.every(e=>t().isObjectiveComplete(e))&&!e.phaseProgress[e.currentPhase]&&t().advancePhase()},isObjectiveComplete:e=>{let i=t();switch(e.type){case"building_level":{let t=i.buildings.find(t=>t.id===e.buildingId);return!!t&&t.level>=e.level}case"building_exists":return i.buildings.some(t=>t.id===e.buildingId);case"buildings_level":return i.buildings.filter(t=>t.level>=e.level).length>=e.count;case"provinces_secure":return i.provinces.filter(e=>"safe"===e.status).length>=e.count;case"attribute":{let t=i.globalAttributes[e.attribute];if("<"===e.operator)return t<e.value;if(">="===e.operator)return t>=e.value;if("<="===e.operator)return t<=e.value;else if(">"===e.operator)return t>e.value;return!1}case"technology":{let t=i.technologies.find(t=>t.id===e.technologyId);return!!t&&t.researched}case"technology_tier":return i.technologies.filter(t=>{let i=l.find(e=>e.id===t.id);return i&&i.tier===e.tier&&t.researched}).length>=e.count;case"serum_progress":return i.serumProgress>=e.value;default:return!1}},advancePhase:()=>{let i=t(),n=p[i.currentPhase];if(n){if(console.log("[v0] Phase completed:",i.currentPhase),w(k.phaseCompleted(n.name,i.currentPhase),i.settings.notifications),n.rewards){let o=n.rewards;if(o.globalStability&&t().updateGlobalAttribute("globalStability",i.globalAttributes.globalStability+o.globalStability),o.morale&&t().updateGlobalAttribute("morale",i.globalAttributes.morale+o.morale),o.containmentCoefficient&&e(e=>({globalAttributes:{...e.globalAttributes,containmentCoefficient:e.globalAttributes.containmentCoefficient+o.containmentCoefficient}})),o.knowledge&&t().addCurrency("knowledge",o.knowledge),o.supplies&&t().addCurrency("supplies",o.supplies),o.productionBonus&&console.log("[v0] Production bonus applied:",o.productionBonus),o.eventReduction&&console.log("[v0] Event reduction applied:",o.eventReduction),o.serumBonus&&console.log("[v0] Serum bonus applied:",o.serumBonus),o.victory){let t;console.log("[v0] VICTORY! Game completed!"),t=0+5*Math.pow(i.currentPhase,2)+Math.floor(2*Math.sqrt(i.buildings.reduce((e,t)=>e+t.level,0)))+8*i.technologies.filter(e=>e.researched).length+10*i.provinces.filter(e=>"safe"===e.status).length+50;let n=i.totalPlayTime/60;n<60&&(t+=Math.floor((60-n)*2)),w({title:"\uD83C\uDF89 VICTORY! HUMANITY SAVED! \uD83C\uDF89",message:"You have synthesized the cure and saved humanity! Earned ".concat(t," Ancestral Data."),type:"success"},i.settings.notifications),e({gameOver:!0,gameOverReason:"Victory! You have completed the serum and saved humanity from extinction.",ancestralData:i.ancestralData+t})}}e(e=>({phaseProgress:{...e.phaseProgress,[e.currentPhase]:!0},currentPhase:e.currentPhase+1})),console.log("[v0] Advanced to phase:",i.currentPhase+1)}},calculateMaintenanceCosts:()=>{let e=t(),i=(0,f.v)(e.ancestralData);return{supplies:e.buildings.reduce((e,t)=>e+(0,_.$v)(t,S[t.id],i).totalUpkeep,0)}},checkGameOverConditions:()=>{let i=t(),n={...i.warningState},o={...i.crisisCounters},s=i.provinces.filter(e=>e.unlocked&&"red"===e.status).length;if(o.redProvinceCount=s,i.globalAttributes.infectionRate>=99){if(o.infectionAt100Ticks+=1,!n.criticalInfection){let e=60-o.infectionAt100Ticks;w(k.criticalInfection(e),i.settings.notifications)}if(n.criticalInfection=!0,o.infectionAt100Ticks>=60){t().triggerGameOver("The infection has completely overwhelmed humanity. The outbreak is unstoppable.");return}}else o.infectionAt100Ticks=0,n.criticalInfection=!1;if(i.currencies.survivors<=0){if(o.zeroSurvivorsTicks+=1,!n.noSurvivors){let e=30-o.zeroSurvivorsTicks;w(k.noSurvivors(e),i.settings.notifications)}if(n.noSurvivors=!0,o.zeroSurvivorsTicks>=30){t().triggerGameOver("All survivors have perished. There is no one left to continue the fight.");return}}else o.zeroSurvivorsTicks=0,n.noSurvivors=!1;if(i.globalAttributes.globalStability<=5){if(o.lowStabilityTicks+=1,!n.collapsedStability){let e=45-o.lowStabilityTicks;w(k.lowStability(e),i.settings.notifications)}if(n.collapsedStability=!0,o.lowStabilityTicks>=45){t().triggerGameOver("Global stability has collapsed. Society has descended into chaos.");return}}else o.lowStabilityTicks=0,n.collapsedStability=!1;if(s>=4){if(n.multipleRedProvinces||w(k.multipleRedProvinces(),i.settings.notifications),n.multipleRedProvinces=!0,s>=5){t().triggerGameOver("Too many territories have fallen into chaos. The outbreak cannot be contained.");return}}else n.multipleRedProvinces=!1;if(o.negativeResourceTicks>=120){n.resourceStarvation=!0,t().triggerGameOver("Unable to maintain infrastructure. The operation has collapsed due to resource starvation.");return}if(o.negativeResourceTicks>60){if(!n.resourceStarvation){let e=120-o.negativeResourceTicks;w(k.resourceStarvation(e),i.settings.notifications)}n.resourceStarvation=!0}else n.resourceStarvation=!1,o.negativeResourceTicks=0;e({warningState:n,crisisCounters:o})},triggerGameOver:i=>{let n;console.log("[v0] GAME OVER:",i);let o=t();n=0+5*Math.pow(o.currentPhase,2)+Math.floor(2*Math.sqrt(o.buildings.reduce((e,t)=>e+t.level,0)))+8*o.technologies.filter(e=>e.researched).length+10*o.provinces.filter(e=>"safe"===e.status).length,o.serumProgress>0&&(n+=5*Math.floor(o.serumProgress/10));let s=o.totalPlayTime/60;s>30&&(n=Math.max(1,n-Math.floor((s-30)/5))),e({gameOver:!0,gameOverReason:i,ancestralData:o.ancestralData+n})},restartGame:i=>{let n=t(),o=i?n.ancestralData:0,s=i?n.prestigeLevel+1:0,r=(0,f.v)(o);e({...C,currencies:{survivors:C.currencies.survivors+r.startingResources.survivors,supplies:C.currencies.supplies+r.startingResources.supplies,knowledge:C.currencies.knowledge+r.startingResources.knowledge,influence:C.currencies.influence+r.startingResources.influence,ancestralData:o},globalAttributes:{...C.globalAttributes,morale:C.globalAttributes.morale+r.startingMorale,globalStability:C.globalAttributes.globalStability+r.startingStability},ancestralData:o,prestigeLevel:s,prestigeUpgrades:i?n.prestigeUpgrades:[],lastTick:Date.now()}),console.log("[v0] Game restarted. Prestige:",s,"Ancestral Data:",o),console.log("[v0] Prestige bonuses applied:",r)},dismissTutorial:()=>{e({tutorialDismissed:!0}),console.log("[v0] Tutorial dismissed")},markPatchNotesViewed:t=>{e({patchNotesVersionViewed:t})}}),{name:"outbreak-protocol-storage",partialize:e=>({currencies:e.currencies,globalAttributes:e.globalAttributes,buildings:e.buildings,technologies:e.technologies,researchQueue:e.researchQueue,currentPhase:e.currentPhase,totalPlayTime:e.totalPlayTime,settings:e.settings,provinces:e.provinces,activeEvents:e.activeEvents,eventHistory:e.eventHistory,reputation:e.reputation,ethicalChoices:e.ethicalChoices,activeMissions:e.activeMissions,temporaryEffects:e.temporaryEffects,eventStats:e.eventStats,nextEventSpawnAt:e.nextEventSpawnAt,tutorialDismissed:e.tutorialDismissed,patchNotesVersionViewed:e.patchNotesVersionViewed,gameOver:e.gameOver,gameOverReason:e.gameOverReason,serumProgress:e.serumProgress,serumRecipes:e.serumRecipes,ancestralData:e.ancestralData,prestigeLevel:e.prestigeLevel,prestigeUpgrades:e.prestigeUpgrades,phaseProgress:e.phaseProgress})}))},3580:(e,t,i)=>{i.d(t,{dj:()=>p,oR:()=>u});var n=i(2115);let o=0,s=new Map,r=e=>{if(s.has(e))return;let t=setTimeout(()=>{s.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,t)},a=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:i}=t;return i?r(i):e.toasts.forEach(e=>{r(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===i||void 0===i?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],c={toasts:[]};function d(e){c=a(c,e),l.forEach(e=>{e(c)})}function u(e){let{...t}=e,i=(o=(o+1)%Number.MAX_SAFE_INTEGER).toString(),n=()=>d({type:"DISMISS_TOAST",toastId:i});return d({type:"ADD_TOAST",toast:{...t,id:i,open:!0,onOpenChange:e=>{e||n()}}}),{id:i,dismiss:n,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:i}})}}function p(){let[e,t]=n.useState(c);return n.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},3999:(e,t,i)=>{i.d(t,{cn:()=>s});var n=i(2596),o=i(9688);function s(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return(0,o.QP)((0,n.$)(t))}},4347:(e,t,i)=>{function n(e){let t=Math.floor(+e),i=Math.floor(10*e),n=Math.floor(.3*e),o=Math.floor(.2*e),s=1+Math.min(.005*e,.3),r=1+Math.min(.01*e,.5);return{startingResources:{survivors:t,supplies:i,knowledge:n,influence:o},productionMultiplier:s,researchSpeedMultiplier:r,costReduction:Math.min(.003*e,.2),maintenanceReduction:Math.min(.004*e,.4),startingMorale:Math.min(.3*e,15),startingStability:Math.min(.3*e,15)}}function o(e){let t=n(e),i=[];return t.startingResources.survivors>0&&(i.push("+".concat(t.startingResources.survivors," starting survivors")),i.push("+".concat(t.startingResources.supplies," starting supplies"))),t.startingResources.knowledge>0&&i.push("+".concat(t.startingResources.knowledge," starting knowledge")),t.startingResources.influence>0&&i.push("+".concat(t.startingResources.influence," starting influence")),t.productionMultiplier>1&&i.push("+".concat(((t.productionMultiplier-1)*100).toFixed(1),"% production rate")),t.researchSpeedMultiplier>1&&i.push("+".concat(((t.researchSpeedMultiplier-1)*100).toFixed(0),"% research speed")),t.costReduction>0&&i.push("-".concat((100*t.costReduction).toFixed(1),"% building costs")),t.maintenanceReduction>0&&i.push("-".concat((100*t.maintenanceReduction).toFixed(1),"% maintenance costs")),t.startingMorale>0&&i.push("+".concat(t.startingMorale.toFixed(1)," starting morale")),t.startingStability>0&&i.push("+".concat(t.startingStability.toFixed(1)," starting stability")),i}i.d(t,{n:()=>o,v:()=>n})},4428:e=>{e.exports=JSON.parse('[{"id":"field_medicine","name":"Field Medicine","description":"Basic medical training for survivors to reduce infection spread","tier":1,"cost":{"knowledge":40},"researchTime":50,"prerequisites":[],"effects":{"globalEffects":{"infectionRate":-1.5}},"subUpgrades":["field_medicine_sub1","field_medicine_sub2"]},{"id":"civilian_networks","name":"Civilian Networks","description":"Organize civilian communication networks for better coordination","tier":1,"cost":{"knowledge":60},"researchTime":75,"prerequisites":[],"effects":{"productionBonus":{"radio_tower":1.2}},"subUpgrades":["civilian_networks_sub1","civilian_networks_sub2"]},{"id":"emergency_mechanics","name":"Emergency Mechanics","description":"Train survivors in basic repair and maintenance skills","tier":1,"cost":{"knowledge":80},"researchTime":100,"prerequisites":[],"effects":{"productionBonus":{"workshop":1.2}},"subUpgrades":["emergency_mechanics_sub1","emergency_mechanics_sub2"]},{"id":"efficient_farming","name":"Efficient Farming","description":"Improved agricultural techniques for better supply production","tier":1,"cost":{"knowledge":120},"researchTime":120,"prerequisites":[],"effects":{"productionBonus":{"farm":1.3}},"subUpgrades":["efficient_farming_sub1","efficient_farming_sub2"]},{"id":"synthetic_drugs","name":"Synthetic Drugs","description":"Develop synthetic medications to treat symptoms and boost morale","tier":2,"cost":{"knowledge":400,"supplies":150},"researchTime":240,"prerequisites":["field_medicine"],"effects":{"productionBonus":{"clinic":1.6},"globalEffects":{"morale":6}},"subUpgrades":["synthetic_drugs_sub1","synthetic_drugs_sub2"]},{"id":"advanced_containment","name":"Advanced Containment","description":"Improved protocols for containing and isolating infected areas","tier":2,"cost":{"knowledge":600,"supplies":250},"researchTime":300,"prerequisites":["field_medicine"],"effects":{"globalEffects":{"containmentCoefficient":0.025}},"subUpgrades":["advanced_containment_sub1","advanced_containment_sub2"]},{"id":"sat_uplink","name":"Satellite Uplink","description":"Establish satellite communication for global coordination","tier":2,"cost":{"knowledge":800,"supplies":400},"researchTime":360,"prerequisites":["civilian_networks"],"effects":{"unlockFeature":"satellite_surveillance"},"subUpgrades":["sat_uplink_sub1","sat_uplink_sub2"]},{"id":"mobile_labs","name":"Mobile Labs","description":"Portable research facilities for field deployment","tier":2,"cost":{"knowledge":1000,"supplies":350},"researchTime":400,"prerequisites":["emergency_mechanics"],"effects":{"productionBonus":{"lab":1.4}},"subUpgrades":["mobile_labs_sub1","mobile_labs_sub2"]},{"id":"protocol_zero","name":"Protocol Zero","description":"Emergency containment protocol for critical outbreak situations","tier":3,"cost":{"knowledge":4000,"supplies":1500},"researchTime":500,"prerequisites":["advanced_containment"],"effects":{"globalEffects":{"containmentCoefficient":0.06},"unlockFeature":"advanced_decontamination"},"subUpgrades":["protocol_zero_sub1","protocol_zero_sub2"]},{"id":"orbital_comms","name":"Orbital Communications","description":"Advanced orbital communication network for global reach","tier":3,"cost":{"knowledge":6500,"supplies":2500},"researchTime":600,"prerequisites":["sat_uplink"],"effects":{"productionBonus":{"radio_tower":1.25},"unlockFeature":"satlink_upgrade"},"subUpgrades":["orbital_comms_sub1","orbital_comms_sub2"]},{"id":"biolab_security","name":"Biolab Security","description":"Enhanced security protocols for research facilities","tier":3,"cost":{"knowledge":8000,"supplies":3000},"researchTime":750,"prerequisites":["mobile_labs"],"effects":{"globalEffects":{"infectionRate":-4}},"subUpgrades":["biolab_security_sub1","biolab_security_sub2"]},{"id":"provisional_vaccine","name":"Provisional Vaccine","description":"Early-stage vaccine that provides temporary immunity","tier":4,"cost":{"knowledge":20000,"supplies":8000},"researchTime":1000,"prerequisites":["synthetic_drugs","protocol_zero"],"effects":{"globalEffects":{"infectionRate":-6,"globalStability":12}},"subUpgrades":["provisional_vaccine_sub1","provisional_vaccine_sub2"]},{"id":"alpha_synthesis","name":"Alpha Synthesis","description":"Breakthrough technology for synthesizing the cure serum","tier":4,"cost":{"knowledge":40000,"supplies":15000},"researchTime":1500,"prerequisites":["provisional_vaccine","biolab_security"],"effects":{"unlockFeature":"serum_synthesis"},"subUpgrades":["alpha_synthesis_sub1","alpha_synthesis_sub2"]},{"id":"resilient_society","name":"Resilient Society","description":"Social programs to build a stronger, more resilient community","tier":4,"cost":{"knowledge":32000,"supplies":12000},"researchTime":1200,"prerequisites":["orbital_comms"],"effects":{"globalEffects":{"morale":12,"globalStability":8}},"subUpgrades":["resilient_society_sub1","resilient_society_sub2"]}]')},6106:e=>{e.exports=JSON.parse('[{"id":"field_medicine_sub1","parentTechId":"field_medicine","name":"Emergency Triage","description":"Implement rapid triage protocols to reduce infection spread","cost":{"knowledge":10,"supplies":50},"effects":{"globalEffects":{"infectionRate":-0.5}}},{"id":"field_medicine_sub2","parentTechId":"field_medicine","name":"Field Medic Training","description":"Train civilians in basic medical care to boost morale","cost":{"knowledge":10,"supplies":50},"effects":{"globalEffects":{"morale":2}}},{"id":"civilian_networks_sub1","parentTechId":"civilian_networks","name":"Community Radio","description":"Establish local radio networks for better communication","cost":{"knowledge":15,"supplies":75},"effects":{"productionBonus":{"radio_tower":1.05}}},{"id":"civilian_networks_sub2","parentTechId":"civilian_networks","name":"Neighborhood Watch","description":"Organize community watch programs to improve safety and morale","cost":{"knowledge":15,"supplies":75},"effects":{"globalEffects":{"morale":3}}},{"id":"emergency_mechanics_sub1","parentTechId":"emergency_mechanics","name":"Tool Workshops","description":"Set up workshops for tool repair and maintenance","cost":{"knowledge":20,"supplies":100},"effects":{"productionBonus":{"workshop":1.08}}},{"id":"emergency_mechanics_sub2","parentTechId":"emergency_mechanics","name":"Irrigation Repair","description":"Maintain and repair farming equipment and irrigation","cost":{"knowledge":20,"supplies":100},"effects":{"productionBonus":{"farm":1.05}}},{"id":"efficient_farming_sub1","parentTechId":"efficient_farming","name":"Crop Rotation","description":"Implement advanced crop rotation for better yields","cost":{"knowledge":30,"supplies":150},"effects":{"productionBonus":{"farm":1.1}}},{"id":"efficient_farming_sub2","parentTechId":"efficient_farming","name":"Community Gardens","description":"Establish community gardens to boost morale and food security","cost":{"knowledge":30,"supplies":150},"effects":{"globalEffects":{"morale":2}}},{"id":"synthetic_drugs_sub1","parentTechId":"synthetic_drugs","name":"Advanced Pharmaceuticals","description":"Develop synthetic drugs for better medical treatment","cost":{"knowledge":100,"supplies":200},"effects":{"productionBonus":{"clinic":1.1}}},{"id":"synthetic_drugs_sub2","parentTechId":"synthetic_drugs","name":"Pain Management","description":"Improve pain management protocols to boost morale","cost":{"knowledge":100,"supplies":200},"effects":{"globalEffects":{"morale":3}}},{"id":"advanced_containment_sub1","parentTechId":"advanced_containment","name":"Quarantine Protocols","description":"Implement strict quarantine measures for better containment","cost":{"knowledge":150,"supplies":300},"effects":{"globalEffects":{"containmentCoefficient":0.01}}},{"id":"advanced_containment_sub2","parentTechId":"advanced_containment","name":"Decontamination Units","description":"Deploy mobile decontamination units to reduce infection","cost":{"knowledge":150,"supplies":300},"effects":{"globalEffects":{"infectionRate":-1}}},{"id":"sat_uplink_sub1","parentTechId":"sat_uplink","name":"Global Communications","description":"Establish satellite uplink for worldwide communication","cost":{"knowledge":200,"supplies":500},"effects":{"globalEffects":{"morale":5}}},{"id":"sat_uplink_sub2","parentTechId":"sat_uplink","name":"Satellite Surveillance","description":"Use satellite imagery for better outbreak tracking","cost":{"knowledge":200,"supplies":500},"effects":{"globalEffects":{"containmentCoefficient":0.01}}},{"id":"mobile_labs_sub1","parentTechId":"mobile_labs","name":"Rapid Testing","description":"Deploy mobile labs for rapid on-site testing","cost":{"knowledge":240,"supplies":400},"effects":{"productionBonus":{"lab":1.15}}},{"id":"mobile_labs_sub2","parentTechId":"mobile_labs","name":"Field Research","description":"Conduct field research to better understand the outbreak","cost":{"knowledge":240,"supplies":400},"effects":{"globalEffects":{"infectionRate":-0.5}}},{"id":"protocol_zero_sub1","parentTechId":"protocol_zero","name":"Emergency Response","description":"Activate emergency response protocols for maximum containment","cost":{"knowledge":1000,"supplies":2000},"effects":{"globalEffects":{"containmentCoefficient":0.02}}},{"id":"protocol_zero_sub2","parentTechId":"protocol_zero","name":"Total Lockdown","description":"Implement total lockdown measures to halt infection spread","cost":{"knowledge":1000,"supplies":2000},"effects":{"globalEffects":{"infectionRate":-2}}},{"id":"orbital_comms_sub1","parentTechId":"orbital_comms","name":"Enhanced Bandwidth","description":"Upgrade orbital communications for better coordination","cost":{"knowledge":1600,"supplies":3000},"effects":{"productionBonus":{"radio_tower":1.1}}},{"id":"orbital_comms_sub2","parentTechId":"orbital_comms","name":"Global Coordination","description":"Coordinate with international agencies to boost morale","cost":{"knowledge":1600,"supplies":3000},"effects":{"globalEffects":{"morale":5}}},{"id":"biolab_security_sub1","parentTechId":"biolab_security","name":"Containment Breach Prevention","description":"Implement advanced security to prevent lab breaches","cost":{"knowledge":2000,"supplies":4000},"effects":{"globalEffects":{"infectionRate":-1.5}}},{"id":"biolab_security_sub2","parentTechId":"biolab_security","name":"Biohazard Protocols","description":"Establish strict biohazard handling protocols","cost":{"knowledge":2000,"supplies":4000},"effects":{"globalEffects":{"containmentCoefficient":0.02}}},{"id":"provisional_vaccine_sub1","parentTechId":"provisional_vaccine","name":"Mass Vaccination","description":"Deploy provisional vaccine to the population","cost":{"knowledge":5000,"supplies":10000},"effects":{"globalEffects":{"infectionRate":-2,"globalStability":5}}},{"id":"provisional_vaccine_sub2","parentTechId":"provisional_vaccine","name":"Hope Restored","description":"Restore hope to the population with vaccine distribution","cost":{"knowledge":5000,"supplies":10000},"effects":{"globalEffects":{"morale":10}}},{"id":"alpha_synthesis_sub1","parentTechId":"alpha_synthesis","name":"Serum Distribution","description":"Distribute the Alpha Serum to stabilize the situation","cost":{"knowledge":10000,"supplies":20000},"effects":{"globalEffects":{"globalStability":10}}},{"id":"alpha_synthesis_sub2","parentTechId":"alpha_synthesis","name":"Outbreak Elimination","description":"Use the Alpha Serum to eliminate the outbreak","cost":{"knowledge":10000,"supplies":20000},"effects":{"globalEffects":{"infectionRate":-3}}},{"id":"resilient_society_sub1","parentTechId":"resilient_society","name":"Community Rebuilding","description":"Rebuild communities for a resilient post-outbreak society","cost":{"knowledge":8000,"supplies":15000},"effects":{"globalEffects":{"morale":5,"globalStability":3}}},{"id":"resilient_society_sub2","parentTechId":"resilient_society","name":"Economic Recovery","description":"Boost production to support economic recovery","cost":{"knowledge":8000,"supplies":15000},"effects":{"productionBonus":{"shelter":1.1,"farm":1.1}}}]')},7168:(e,t,i)=>{i.d(t,{$:()=>l});var n=i(5155);i(2115);var o=i(9708),s=i(2085),r=i(3999);let a=(0,s.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{className:t,variant:i,size:s,asChild:l=!1,...c}=e,d=l?o.DX:"button";return(0,n.jsx)(d,{"data-slot":"button",className:(0,r.cn)(a({variant:i,size:s,className:t})),...c})}},7777:(e,t,i)=>{i.d(t,{Bc:()=>a,ZI:()=>u,k$:()=>d,m_:()=>c});var n=i(5155),o=i(2115),s=i(9613),r=i(3999);function a(e){let{delayDuration:t=0,...i}=e;return(0,n.jsx)(s.Kq,{"data-slot":"tooltip-provider",delayDuration:t,...i})}let l=o.createContext(!1);function c(e){let{...t}=e;return o.useContext(l)?(0,n.jsx)(s.bL,{"data-slot":"tooltip",...t}):(0,n.jsx)(a,{children:(0,n.jsx)(l.Provider,{value:!0,children:(0,n.jsx)(s.bL,{"data-slot":"tooltip",...t})})})}function d(e){let{...t}=e;return(0,n.jsx)(s.l9,{"data-slot":"tooltip-trigger",...t})}function u(e){let{className:t,sideOffset:i=0,children:o,...a}=e;return(0,n.jsx)(s.ZL,{children:(0,n.jsxs)(s.UC,{"data-slot":"tooltip-content",sideOffset:i,className:(0,r.cn)("bg-foreground text-background animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...a,children:[o,(0,n.jsx)(s.i3,{className:"bg-foreground fill-foreground z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}},8482:(e,t,i)=>{i.d(t,{BT:()=>l,Wu:()=>c,ZB:()=>a,Zp:()=>s,aR:()=>r,wL:()=>d});var n=i(5155);i(2115);var o=i(3999);function s(e){let{className:t,...i}=e;return(0,n.jsx)("div",{"data-slot":"card",className:(0,o.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...i})}function r(e){let{className:t,...i}=e;return(0,n.jsx)("div",{"data-slot":"card-header",className:(0,o.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...i})}function a(e){let{className:t,...i}=e;return(0,n.jsx)("div",{"data-slot":"card-title",className:(0,o.cn)("leading-none font-semibold",t),...i})}function l(e){let{className:t,...i}=e;return(0,n.jsx)("div",{"data-slot":"card-description",className:(0,o.cn)("text-muted-foreground text-sm",t),...i})}function c(e){let{className:t,...i}=e;return(0,n.jsx)("div",{"data-slot":"card-content",className:(0,o.cn)("px-6",t),...i})}function d(e){let{className:t,...i}=e;return(0,n.jsx)("div",{"data-slot":"card-footer",className:(0,o.cn)("flex items-center px-6 [.border-t]:pt-6",t),...i})}},8935:(e,t,i)=>{i.d(t,{r:()=>eb});var n=i(5155),o=i(2115),s=i(3405),r=i(9987),a=i(9397),l=i(6785),c=i(1284),d=i(3062),u=i(1366),p=i(7580),f=i(7108),g=i(9376),m=i(3109),b=i(5525),v=i(1243),h=i(1976),y=i(3105),x=i(9041),w=i(4347),k=i(1981);let _=JSON.parse('[{"version":"1.7.1","date":"2025-10-16","highlights":["CRITICAL FIX: Province/territory system completely repaired - all actions now work correctly.","Fixed province initialization bug where new territories would flash critical status then become stable.","Fixed stabilize action bug where resources were spent but province status didn\'t update.","Province stability field now properly initialized and updated by all actions.","Territory maintenance costs now correctly displayed in all UI upkeep calculations.","Resource header and dashboard now include province maintenance in total upkeep displays.","Province stability decay system working as designed with proper status thresholds.","Map page already displayed individual territory maintenance costs correctly.","All 6 territories now fully functional: unlock, stabilize, and reinforce actions work properly."]},{"version":"1.7.0","date":"2025-10-16","highlights":["CRITICAL FIX: Research production bonuses now properly apply to buildings.","Technologies with productionBonus effects (like Efficient Farming +30% for farms) now work correctly.","Sub-upgrade production bonuses (like Crop Rotation +10% for farms) now stack multiplicatively.","Building cards now show \'Active Research Bonuses\' panel with technology and sub-upgrade names.","Research bonuses combine with upgrade bonuses for maximum production multipliers.","All 14 technologies and 28 sub-upgrades with production effects are now fully functional.","Global effects from technologies (morale, infection, containment) were already working correctly.","UI displays which specific research is boosting each building in the details section.","Complete audit and implementation of the entire research system across all game loops."]},{"version":"1.6.1","date":"2025-10-16","highlights":["CRITICAL FIX: Building upgrades now properly apply their effects to production calculations.","Production multipliers from upgrades (e.g., 1.5x, 2x) now correctly boost building output.","Worker efficiency bonuses from upgrades now stack additively and apply to all production.","Cost reduction upgrades now reduce both building purchase costs and maintenance costs.","Added visual indicators showing when buildings are boosted by upgrades (sparkles icon).","Building cards now display active upgrade bonuses in the details section.","Hovering over upgrade badges shows a tooltip with cumulative bonus breakdown.","Fixed game loop to use centralized production calculation system for consistency.","All 50 building upgrades across 10 buildings are now fully functional in both backend and UI."]},{"version":"1.6.0","date":"2025-10-16","highlights":["Fixed critical bug where the Serum Synthesis Station was non-functional - it now properly produces serum over time.","Workshop production bonuses now correctly apply to all resource generation.","All building special effects (morale, containment, production bonuses) are now working as intended.","Added manual Prestige system - restart your run anytime from the Settings page to earn permanent bonuses.","Serum synthesis recipes now functional - spend resources to accelerate cure development.","Building effects now display their actual impact on your production and global stats.","Version number now visible in Settings to help track which updates you have.","Endgame progression fully functional - you can now complete the campaign and synthesize the cure."]},{"version":"1.0.1","date":"2025-10-15","highlights":["Added new News & Game Releases modal and tracker to keep players informed of updates.","Fixed import/export save issues causing data loss in some browsers.","Improved overall UI design for clarity and readability.","Added detailed tooltips and clearer explanations for resources and statistics.","Rebalanced early- and mid-game progression for smoother difficulty scaling.","Adjusted worker and survivor generation rates for better pacing.","Events now auto-apply their decline outcome when the timer expires.","Resource header and dashboard cards received a visual refresh with clearer contrast and tooltips.","Mission stats now track survivor-weighted average risk and show consistent availability numbers.","Research and event queues display human-readable names and contextual guidance.","Notifications restyled with game-themed accents and actionable buttons."]},{"version":"1.0.0","date":"2025-10-15","highlights":["Initial Outbreak Protocol launch."]}]');var C=i(5452),S=i(4416),N=i(3999);function j(e){let{...t}=e;return(0,n.jsx)(C.bL,{"data-slot":"dialog",...t})}function E(e){let{...t}=e;return(0,n.jsx)(C.ZL,{"data-slot":"dialog-portal",...t})}function A(e){let{className:t,...i}=e;return(0,n.jsx)(C.hJ,{"data-slot":"dialog-overlay",className:(0,N.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...i})}function R(e){let{className:t,children:i,showCloseButton:o=!0,...s}=e;return(0,n.jsxs)(E,{"data-slot":"dialog-portal",children:[(0,n.jsx)(A,{}),(0,n.jsxs)(C.UC,{"data-slot":"dialog-content",className:(0,N.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...s,children:[i,o&&(0,n.jsxs)(C.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,n.jsx)(S.A,{}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function I(e){let{className:t,...i}=e;return(0,n.jsx)("div",{"data-slot":"dialog-header",className:(0,N.cn)("flex flex-col gap-2 text-center sm:text-left",t),...i})}function T(e){let{className:t,...i}=e;return(0,n.jsx)(C.hE,{"data-slot":"dialog-title",className:(0,N.cn)("text-lg leading-none font-semibold",t),...i})}function M(e){let{className:t,...i}=e;return(0,n.jsx)(C.VY,{"data-slot":"dialog-description",className:(0,N.cn)("text-muted-foreground text-sm",t),...i})}function P(e){let{open:t,onOpenChange:i}=e,s=(0,o.useMemo)(()=>[..._].sort((e,t)=>e.version<t.version?1:-1),[]);return(0,n.jsx)(j,{open:t,onOpenChange:i,children:(0,n.jsxs)(R,{className:"max-h-[85vh] max-w-2xl overflow-hidden border-border/60 bg-surface/95 p-0 text-foreground shadow-2xl backdrop-blur",children:[(0,n.jsxs)(I,{className:"space-y-2 border-b border-border/60 bg-surface/80 px-6 py-4",children:[(0,n.jsx)(T,{className:"text-lg font-semibold tracking-wide text-primary",children:"Operation Updates"}),(0,n.jsx)(M,{className:"text-xs uppercase tracking-[0.3em] text-muted-foreground",children:"Briefings | Fixes | Balance Tweaks"})]}),(0,n.jsx)("div",{className:"max-h-[70vh] overflow-y-auto px-6 py-4",children:(0,n.jsx)("div",{className:"space-y-6",children:s.map(e=>(0,n.jsxs)("div",{className:"rounded-lg border border-border/50 bg-surface/70 p-5 shadow-sm",children:[(0,n.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2 border-b border-border/40 pb-3",children:[(0,n.jsxs)("div",{className:"text-sm font-semibold uppercase tracking-wide text-primary",children:["Version ",e.version]}),(0,n.jsx)("span",{className:"text-xs text-muted-foreground",children:e.date})]}),(0,n.jsx)("ul",{className:"mt-3 space-y-2 text-sm leading-relaxed text-muted-foreground",children:e.highlights.map((e,t)=>(0,n.jsxs)("li",{className:"flex gap-2 rounded-md border border-border/40 bg-surface px-3 py-2",children:[(0,n.jsx)("span",{className:"mt-1 h-2 w-2 flex-shrink-0 rounded-full bg-primary"}),(0,n.jsx)("span",{children:e})]},t))})]},e.version))})})]})})}var L=i(547);function O(e){let{...t}=e;return(0,n.jsx)(L.bL,{"data-slot":"popover",...t})}function B(e){let{...t}=e;return(0,n.jsx)(L.l9,{"data-slot":"popover-trigger",...t})}function D(e){let{className:t,align:i="center",sideOffset:o=4,...s}=e;return(0,n.jsx)(L.ZL,{children:(0,n.jsx)(L.UC,{"data-slot":"popover-content",align:i,sideOffset:o,className:(0,N.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...s})})}var U=i(7777);let z=(e,t)=>{let i=e.split(".").map(e=>parseInt(e,10)),n=t.split(".").map(e=>parseInt(e,10));for(let e=0;e<Math.max(i.length,n.length);e+=1){var o,s;let t=null!==(o=i[e])&&void 0!==o?o:0,r=null!==(s=n[e])&&void 0!==s?s:0;if(t>r)return 1;if(t<r)return -1}return 0},G=e=>{let t=Math.abs(e);return t>=100?e.toFixed(0):t>=10?e.toFixed(1):t>=1?e.toFixed(2):e.toFixed(3)},F=e=>0===e?"0.00":"".concat(e>=0?"+":"-").concat(G(Math.abs(e))),q={Stability:{title:"Global Stability",body:["Measures how orderly and coordinated your response network is. Higher stability slows future infection growth and keeps crises at bay.","Rises when you secure provinces, resolve events decisively, and maintain healthy morale across survivors.","Drops when morale collapses, infection surges, or territories slip into red status without containment."],accent:"text-success"},Infection:{title:"Infection Pressure",body:["Indicates how aggressively the outbreak is spreading at this moment. Critical levels can trigger game-ending scenarios if ignored.","Lower the pressure with containment research, stabilised provinces, and events that secure medical or logistic support.","It climbs rapidly when morale is low, red provinces stack up, or emergencies are left unresolved."],accent:"text-danger"},Containment:{title:"Containment Coefficient",body:["Shows how much infection you suppress every tick. The higher the coefficient, the more the infection rate declines naturally.","Invest in research labs, containment units, and specialised technologies to elevate this value.","Falling behind on research or losing critical infrastructure will stagnate containment gains."],accent:"text-primary"},Morale:{title:"Global Morale",body:["Captures survivor optimism and willingness to follow orders. Strong morale cushions stability and infection swings.","Boost it by resolving crises favorably, providing aid, and keeping supplies steady.","Starvation, high casualties, and hard-line ethical choices will erode morale over time."],accent:"text-info"}};function V(){var e;let t=(0,s.T)(e=>e.currencies),i=(0,s.T)(e=>e.globalAttributes),r=(0,s.T)(e=>e.resourceRates),C=(0,s.T)(e=>e.currentPhase),S=(0,s.T)(e=>e.buildings),N=(0,s.T)(e=>e.technologies),j=(0,s.T)(e=>e.provinces),E=(0,s.T)(e=>e.ancestralData),A=(0,s.T)(e=>e.temporaryEffects.production),R=(0,s.T)(e=>e.patchNotesVersionViewed),I=(0,s.T)(e=>e.markPatchNotesViewed),T=(null===(e=(y[C]||y[0]).name)||void 0===e?void 0:e.toUpperCase())||"UNKNOWN",[M,L]=(0,o.useState)(null),[q,V]=(0,o.useState)(!1),J=(0,o.useMemo)(()=>(0,k.yC)(x),[]),Y=(0,o.useMemo)(()=>(0,w.v)(E),[E]),W=(0,o.useMemo)(()=>(0,k.O$)(S,J,Y,A,Date.now(),N,j),[S,J,Y,A,N,j]),Z=W.productionTotals.supplies,$=W.maintenanceTotal+W.provinceMaintenanceSupplies,K=W.breakdown.filter(e=>e.maintenance.totalUpkeep>0).sort((e,t)=>t.maintenance.totalUpkeep-e.maintenance.totalUpkeep).slice(0,3);(0,o.useEffect)(()=>{let e=()=>{L(new Date().toLocaleTimeString("en-US",{hour12:!1}))};e();let t=window.setInterval(e,1e3);return()=>{window.clearInterval(t)}},[]);let X=Z-$,ee=X>=0?"text-success":"text-danger",et=X>=0?"bg-success/10 border-success/30":"bg-danger/10 border-danger/30",ei=(0,o.useMemo)(()=>{var e;return null!==(e=[..._].sort((e,t)=>z(t.version,e.version))[0])&&void 0!==e?e:null},[]),en=!!ei&&R!==ei.version,eo=e=>{V(e),e&&en&&ei&&I(ei.version)},es="relative inline-flex items-center gap-1 rounded border px-2 py-1 text-[10px] font-semibold uppercase tracking-wide transition-all focus:outline-none focus:ring-2 focus:ring-primary/40 ".concat(en?"border-primary bg-primary/10 text-primary shadow-[0_0_0.75rem_rgba(59,130,246,0.45)] animate-pulse hover:bg-primary/15":"border-border bg-surface text-muted-foreground hover:bg-surface-elevated");return(0,n.jsxs)(U.Bc,{delayDuration:150,children:[(0,n.jsx)("header",{className:"sticky top-0 z-40 border-b border-border/60 bg-surface/95 backdrop-blur",children:(0,n.jsxs)("div",{className:"mx-auto flex max-w-7xl flex-col gap-3 px-4 py-3",children:[(0,n.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,n.jsxs)("div",{className:"flex flex-wrap items-center gap-3 text-xs font-semibold uppercase tracking-[0.25em] text-muted-foreground",children:[(0,n.jsx)("span",{className:"text-sm tracking-[0.3em] text-foreground",children:"Outbreak Protocol"}),(0,n.jsx)("span",{className:"rounded border border-border px-2 py-0.5 text-[10px] tracking-[0.4em] text-primary",children:"Command"}),(0,n.jsxs)("span",{className:"flex items-center gap-1 rounded bg-success/10 px-2 py-0.5 text-[10px] font-semibold text-success",children:[(0,n.jsx)(a.A,{className:"h-3 w-3 animate-pulse"})," Active"]}),(0,n.jsxs)("span",{className:"flex items-center gap-1 text-[10px] tracking-[0.3em] text-muted-foreground",children:[(0,n.jsx)(l.A,{className:"h-3 w-3 text-primary"})," Phase ",String(C+1).padStart(2,"0"),": ",T]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,n.jsxs)(O,{children:[(0,n.jsx)(B,{asChild:!0,children:(0,n.jsxs)("button",{type:"button",className:"flex items-center gap-1 rounded border px-2 py-1 text-[10px] font-semibold uppercase tracking-wide transition-colors ".concat(et),"aria-label":"View supply breakdown",children:["Supplies ",F(X),"/s",(0,n.jsx)(c.A,{className:"h-3 w-3"})]})}),(0,n.jsxs)(D,{align:"end",className:"w-64 text-xs",children:[(0,n.jsxs)("div",{className:"mb-2 flex items-center justify-between text-sm font-semibold text-foreground",children:[(0,n.jsx)("span",{children:"Supply Balance"}),(0,n.jsxs)("span",{className:ee,children:[F(X),"/s"]})]}),(0,n.jsxs)("div",{className:"space-y-1 text-muted-foreground",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{children:"Production"}),(0,n.jsxs)("span",{className:"text-success",children:["+",G(Z),"/s"]})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{children:"Upkeep"}),(0,n.jsxs)("span",{className:"text-danger",children:["-",G($),"/s"]})]})]}),K.length>0&&(0,n.jsxs)("div",{className:"mt-3 space-y-1",children:[(0,n.jsx)("p",{className:"text-[11px] font-semibold text-foreground",children:"Top Upkeep"}),K.map(e=>(0,n.jsxs)("div",{className:"flex items-center justify-between text-[11px]",children:[(0,n.jsxs)("span",{className:"truncate text-muted-foreground",children:[e.name," Lv.",e.level]}),(0,n.jsxs)("span",{className:"text-danger",children:["-",G(e.maintenance.totalUpkeep),"/s"]})]},"".concat(e.id,"-").concat(e.level)))]})]})]}),(0,n.jsxs)("button",{type:"button",onClick:()=>eo(!0),className:es,"aria-label":en?"View latest operation updates. New briefing available.":"View operation updates",children:[(0,n.jsx)(d.A,{className:"h-3 w-3"}),(0,n.jsx)("span",{className:"hidden sm:inline",children:"Updates"}),ei&&(0,n.jsxs)("span",{className:"text-[9px] font-mono uppercase tracking-[0.3em] text-muted-foreground",children:["v",ei.version]}),en&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"absolute -right-1 -top-1 h-2 w-2 rounded-full bg-primary shadow-[0_0_8px_rgba(59,130,246,0.85)]"}),(0,n.jsx)("span",{className:"absolute -right-1 -top-1 h-2 w-2 rounded-full bg-primary/60 animate-ping"})]})]}),(0,n.jsxs)("a",{href:"https://discord.gg/n2GNRfPWVM",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 rounded border border-border bg-surface px-2 py-1 text-[10px] font-semibold uppercase tracking-wide text-primary transition-colors hover:bg-surface-elevated","aria-label":"Join the Outbreak Protocol community on Discord",children:[(0,n.jsx)(u.A,{className:"h-3 w-3"}),(0,n.jsx)("span",{className:"hidden sm:inline",children:"Discord"})]}),(0,n.jsx)("span",{className:"font-mono text-[11px] text-muted-foreground",children:null!=M?M:"--:--:--"})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-2 sm:grid-cols-4",children:[(0,n.jsx)(Q,{icon:(0,n.jsx)(p.A,{className:"h-4 w-4"}),label:"Survivors",value:t.survivors,color:"text-foreground",shortLabel:"SV",rate:r.survivors,production:W.productionTotals.survivors}),(0,n.jsx)(Q,{icon:(0,n.jsx)(f.A,{className:"h-4 w-4"}),label:"Supplies",value:t.supplies,color:"text-info",shortLabel:"RF",rate:r.supplies,production:Z,upkeep:$}),(0,n.jsx)(Q,{icon:(0,n.jsx)(g.A,{className:"h-4 w-4"}),label:"Knowledge",value:t.knowledge,color:"text-primary",shortLabel:"CN",rate:r.knowledge,production:W.productionTotals.knowledge}),(0,n.jsx)(Q,{icon:(0,n.jsx)(m.A,{className:"h-4 w-4"}),label:"Influence",value:t.influence,color:"text-warning",shortLabel:"IF",rate:r.influence,production:W.productionTotals.influence})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-2 md:grid-cols-4",children:[(0,n.jsx)(H,{icon:(0,n.jsx)(b.A,{className:"h-3 w-3"}),label:"Stability",value:i.globalStability,max:100,color:"success"}),(0,n.jsx)(H,{icon:(0,n.jsx)(v.A,{className:"h-3 w-3"}),label:"Infection",value:i.infectionRate,max:100,color:"danger",inverse:!0}),(0,n.jsx)(H,{icon:(0,n.jsx)(l.A,{className:"h-3 w-3"}),label:"Containment",value:100*i.containmentCoefficient,max:100,color:"primary"}),(0,n.jsx)(H,{icon:(0,n.jsx)(h.A,{className:"h-3 w-3"}),label:"Morale",value:i.morale,max:100,color:"info"})]})]})}),(0,n.jsx)(P,{open:q,onOpenChange:eo})]})}function Q(e){let{icon:t,label:i,value:o,color:s,shortLabel:a,rate:l,production:c,upkeep:d}=e,u=null!=l?l:0,p=u>0?"text-success":u<0?"text-danger":"text-muted-foreground",f=F(u),g="number"==typeof c&&0!==c,m="number"==typeof d&&d>0;return(0,n.jsxs)(U.m_,{children:[(0,n.jsx)(U.k$,{asChild:!0,children:(0,n.jsxs)("div",{className:"flex items-center gap-2 rounded-md border border-border/60 bg-surface/70 px-3 py-2 transition-colors hover:border-border",children:[(0,n.jsx)("div",{className:"".concat(s),children:t}),(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsx)("div",{className:"text-[10px] text-subtle-foreground uppercase tracking-wide",children:a}),(0,n.jsx)("div",{className:"text-data truncate text-sm font-bold ".concat(s),children:(0,r.ZV)(o)}),(0,n.jsxs)("div",{className:"text-[11px] font-semibold ".concat(p),children:[f,"/s"]})]})]})}),(g||m)&&(0,n.jsxs)(U.ZI,{side:"top",align:"start",className:"w-56 rounded-md bg-surface-elevated/95 px-3 py-2 text-xs text-foreground shadow-lg backdrop-blur",children:[(0,n.jsxs)("p",{className:"text-sm font-semibold text-foreground/90",children:[i," Breakdown"]}),(0,n.jsxs)("div",{className:"mt-2 space-y-1.5 text-[11px] text-muted-foreground",children:[g&&(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{children:"Production"}),(0,n.jsxs)("span",{className:"text-success font-semibold",children:[F(c||0),"/s"]})]}),m&&(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{children:"Upkeep"}),(0,n.jsxs)("span",{className:"text-danger font-semibold",children:["-",G(d||0),"/s"]})]})]})]})]})}function H(e){let{icon:t,label:i,value:o,max:s,color:r,inverse:a=!1}=e,l=Math.min(100,o/s*100);return(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:{success:"text-success",danger:"text-danger",primary:"text-primary",info:"text-info"}[r],children:t}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("div",{className:"mb-1 flex items-center justify-between",children:[(0,n.jsxs)(U.m_,{children:[(0,n.jsx)(U.k$,{asChild:!0,children:(0,n.jsx)("span",{className:"cursor-help text-xs text-subtle-foreground",children:i})}),(0,n.jsx)(U.ZI,{side:"top",align:"center",className:"max-w-xs rounded-md border border-border/60 bg-surface-elevated/95 px-3 py-3 text-xs text-foreground shadow-lg backdrop-blur",children:(()=>{var e;let t=q[i];return t?(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("p",{className:"text-sm font-semibold ".concat(null!==(e=t.accent)&&void 0!==e?e:"text-foreground/90"),children:t.title}),t.body.map((e,t)=>(0,n.jsx)("p",{className:"leading-snug text-muted-foreground",children:e},t))]}):(0,n.jsx)("p",{className:"leading-snug text-muted-foreground",children:i})})()})]}),(0,n.jsxs)("span",{className:"text-data text-xs text-muted-foreground",children:[o.toFixed(0),"%"]})]}),(0,n.jsx)("div",{className:"h-1 w-full overflow-hidden rounded-full bg-surface",children:(0,n.jsx)("div",{className:"h-full transition-all duration-300 ".concat({success:"bg-success",danger:"bg-danger",primary:"bg-primary",info:"bg-info"}[r]),style:{width:"".concat(l,"%")}})})]})]})}var J=i(6874),Y=i.n(J),W=i(5695),Z=i(3783),$=i(3227),K=i(2111),X=i(3578),ee=i(1539),et=i(2580),ei=i(3761),en=i(381);let eo=[{key:"dashboard",path:"/",icon:Z.A,label:"Command"},{key:"buildings",path:"/buildings",icon:$.A,label:"Buildings"},{key:"research",path:"/research",icon:K.A,label:"Research"},{key:"map",path:"/map",icon:X.A,label:"Territory"},{key:"events",path:"/events",icon:ee.A,label:"Events"},{key:"missions",path:"/missions",icon:et.A,label:"Operations"},{key:"serum",path:"/serum",icon:ei.A,label:"Serum Lab"},{key:"settings",path:"/settings",icon:en.A,label:"Settings"}];function es(){let e=(0,W.usePathname)();return(0,n.jsx)("footer",{className:"border-t border-border bg-surface-elevated",children:(0,n.jsx)("nav",{className:"mx-auto max-w-7xl",children:(0,n.jsx)("div",{className:"grid grid-cols-4 gap-0.5 p-1.5 md:grid-cols-8 md:gap-1 md:p-2",children:eo.map(t=>{let i=e===t.path,o=t.icon;return(0,n.jsx)(Y(),{href:t.path,className:"group",children:(0,n.jsxs)("div",{className:"\n                    relative flex min-h-[3.5rem] flex-col items-center justify-center gap-1 rounded-lg\n                    border transition-all duration-200\n                    ".concat(i?"border-primary/50 bg-primary/10 shadow-[0_0_12px_rgba(14,165,233,0.3)]":"border-transparent bg-surface hover:border-border hover:bg-surface-elevated","\n                  "),children:[(0,n.jsx)("div",{className:"flex h-5 w-5 items-center justify-center",children:(0,n.jsx)(o,{className:"h-5 w-5 transition-colors ".concat(i?"text-primary":"text-muted-foreground group-hover:text-foreground")})}),(0,n.jsx)("span",{className:"hidden text-[10px] font-medium uppercase tracking-wider transition-colors md:block ".concat(i?"text-primary":"text-muted-foreground group-hover:text-foreground"),children:t.label}),i&&(0,n.jsx)("div",{className:"absolute bottom-1 h-1 w-1 rounded-full bg-primary md:hidden"})]})},t.key)})})})})}var er=i(7168),ea=i(8186),el=i(4186),ec=i(9037),ed=i(133);function eu(){let e=(0,s.T)(e=>e.gameOver),t=(0,s.T)(e=>e.gameOverReason),i=(0,s.T)(e=>e.ancestralData),o=(0,s.T)(e=>e.prestigeLevel),r=(0,s.T)(e=>e.currentPhase),a=(0,s.T)(e=>e.totalPlayTime),c=(0,s.T)(e=>e.buildings),d=(0,s.T)(e=>e.technologies),u=(0,s.T)(e=>e.restartGame);if(!e)return null;let p=Math.floor(a/60),f=Math.floor(p/60),g=p%60,b=c.reduce((e,t)=>e+t.level,0),h=d.filter(e=>e.researched).length,y=(null==t?void 0:t.toLowerCase().includes("victory"))||(null==t?void 0:t.toLowerCase().includes("saved humanity")),x=y?{borderColor:"border-success/50",bgGradient:"from-green-950/95 via-background to-background",overlayGradient:"from-green-600/10 via-transparent to-transparent",iconBg:"bg-success/20",iconRing:"ring-success/30",iconColor:"text-success",titleColor:"text-success",subtitleColor:"text-success/80",title:"\uD83C\uDF89 OPERATION SUCCESS! \uD83C\uDF89",icon:ea.A}:{borderColor:"border-red-500/50",bgGradient:"from-red-950/95 via-background to-background",overlayGradient:"from-red-600/10 via-transparent to-transparent",iconBg:"bg-red-500/20",iconRing:"ring-red-500/30",iconColor:"text-red-400",titleColor:"text-red-400",subtitleColor:"text-red-300/80",title:"OPERATION FAILED",icon:v.A},w=x.icon;return(0,n.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-md",children:(0,n.jsx)("div",{className:"w-full max-w-3xl px-4",children:(0,n.jsxs)("div",{className:"relative overflow-hidden rounded-2xl border-2 ".concat(x.borderColor," bg-gradient-to-br ").concat(x.bgGradient," shadow-2xl"),children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br ".concat(x.overlayGradient," animate-pulse")}),(0,n.jsxs)("div",{className:"relative space-y-8 p-8",children:[(0,n.jsxs)("div",{className:"flex flex-col items-center gap-4 text-center",children:[(0,n.jsx)("div",{className:"rounded-full ".concat(x.iconBg," p-6 ring-4 ").concat(x.iconRing," animate-pulse"),children:(0,n.jsx)(w,{className:"h-20 w-20 ".concat(x.iconColor)})}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("h2",{className:"text-4xl font-black tracking-tight ".concat(x.titleColor),children:x.title}),(0,n.jsx)("p",{className:"text-xl font-semibold ".concat(x.subtitleColor),children:t})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-4 rounded-xl border border-border/50 bg-background/50 p-6",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"rounded-lg bg-primary/20 p-2",children:(0,n.jsx)(l.A,{className:"h-5 w-5 text-primary"})}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Phase Reached"}),(0,n.jsx)("p",{className:"text-3xl font-bold text-foreground",children:r})]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"rounded-lg bg-blue-500/20 p-2",children:(0,n.jsx)(el.A,{className:"h-5 w-5 text-blue-400"})}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Play Time"}),(0,n.jsx)("p",{className:"text-3xl font-bold text-foreground",children:f>0?"".concat(f,"h ").concat(g,"m"):"".concat(g,"m")})]})]})]}),(0,n.jsxs)("div",{className:"space-y-4 rounded-xl border border-border/50 bg-background/50 p-6",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"rounded-lg bg-green-500/20 p-2",children:(0,n.jsx)(m.A,{className:"h-5 w-5 text-green-400"})}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Building Levels"}),(0,n.jsx)("p",{className:"text-3xl font-bold text-foreground",children:b})]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"rounded-lg bg-purple-500/20 p-2",children:(0,n.jsx)(ec.A,{className:"h-5 w-5 text-purple-400"})}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Technologies"}),(0,n.jsx)("p",{className:"text-3xl font-bold text-foreground",children:h})]})]})]})]}),(0,n.jsx)("div",{className:"rounded-xl border-2 border-primary/50 bg-gradient-to-r from-primary/20 to-primary/10 p-6",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Ancestral Data Earned"}),(0,n.jsxs)("p",{className:"text-5xl font-black text-primary",children:[i," DG"]}),(0,n.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Total Prestige Level: ",(0,n.jsx)("span",{className:"font-bold text-primary",children:o+1})]})]}),(0,n.jsx)(ea.A,{className:"h-16 w-16 text-primary/50"})]})}),(0,n.jsxs)("div",{className:"flex gap-4",children:[(0,n.jsxs)(er.$,{onClick:()=>u(!1),variant:"outline",className:"flex-1 gap-2 border-2 py-6 text-base font-semibold hover:bg-background/50",size:"lg",children:[(0,n.jsx)(ed.A,{className:"h-5 w-5"}),y?"New Campaign":"Try Again"]}),(0,n.jsxs)(er.$,{onClick:()=>u(!0),className:"flex-1 gap-2 bg-gradient-to-r from-primary via-primary to-primary/80 py-6 text-base font-bold shadow-lg shadow-primary/50 hover:shadow-primary/70",size:"lg",children:[(0,n.jsx)(ea.A,{className:"h-5 w-5"}),y?"Continue with Prestige":"Prestige Restart"]})]}),(0,n.jsx)("div",{className:"rounded-lg border border-primary/30 bg-primary/5 p-4 text-center",children:(0,n.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:y?"Use your earned Ancestral Data for permanent bonuses in your next campaign":"Prestige bonuses provide starting resources, production boosts, and cost reductions"})})]})]})})})}var ep=i(109),ef=i(8500),eg=i(4516);function em(){let e=(0,s.T)(e=>e.warningState),t=(0,s.T)(e=>e.crisisCounters),[i,r]=(0,o.useState)(new Set),a=[];e.criticalInfection&&a.push({id:"infection",icon:ep.A,title:"CRITICAL INFECTION",message:"Infection rate at 100%! Humanity will be extinct!",countdown:60-t.infectionAt100Ticks,severity:"critical",action:"Build Containment Units and stabilize red provinces"}),e.noSurvivors&&a.push({id:"survivors",icon:p.A,title:"POPULATION COLLAPSE",message:"No survivors remaining! Society is collapsing!",countdown:30-t.zeroSurvivorsTicks,severity:"critical",action:"Increase survivor production from Shelters"}),e.collapsedStability&&a.push({id:"stability",icon:ef.A,title:"STABILITY FAILURE",message:"Global stability below critical threshold!",countdown:45-t.lowStabilityTicks,severity:"critical",action:"Increase morale and secure provinces"}),e.multipleRedProvinces&&a.push({id:"provinces",icon:eg.A,title:"TERRITORY CRISIS",message:"".concat(t.redProvinceCount," provinces in critical state!"),countdown:null,severity:"warning",action:"Stabilize provinces immediately"}),e.resourceStarvation&&a.push({id:"resources",icon:f.A,title:"RESOURCE STARVATION",message:"Cannot afford building maintenance costs!",countdown:120-t.negativeResourceTicks,severity:"warning",action:"Increase supply production or reduce buildings"});let l=a.filter(e=>!i.has(e.id));return 0===l.length?null:(0,n.jsx)("div",{className:"fixed bottom-20 left-0 right-0 z-40 flex flex-col gap-3 px-4 pb-4",children:l.map(e=>{let t=e.icon,i="critical"===e.severity;return(0,n.jsxs)("div",{className:"relative overflow-hidden rounded-lg border-2 shadow-2xl backdrop-blur-sm ".concat(i?"animate-pulse border-red-500 bg-red-950/95":"border-yellow-500 bg-yellow-950/95"),children:[(0,n.jsx)("div",{className:"absolute inset-0 opacity-20 ".concat(i?"bg-gradient-to-r from-red-600 via-red-500 to-red-600 animate-[shimmer_2s_ease-in-out_infinite]":"bg-gradient-to-r from-yellow-600 via-yellow-500 to-yellow-600")}),(0,n.jsxs)("div",{className:"relative flex items-start gap-4 p-4",children:[(0,n.jsx)("div",{className:"flex-shrink-0 rounded-full p-3 ".concat(i?"bg-red-500/30 animate-pulse":"bg-yellow-500/30"),children:(0,n.jsx)(t,{className:"h-8 w-8 ".concat(i?"text-red-200":"text-yellow-200")})}),(0,n.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)(v.A,{className:"h-5 w-5 ".concat(i?"text-red-300":"text-yellow-300")}),(0,n.jsx)("h3",{className:"text-lg font-black tracking-wide ".concat(i?"text-red-100":"text-yellow-100"),children:e.title})]}),null!==e.countdown&&(0,n.jsxs)("div",{className:"flex items-center gap-2 rounded-full px-4 py-1.5 font-mono text-lg font-bold ".concat(i?"bg-red-500/50 text-red-50":"bg-yellow-500/50 text-yellow-50"),children:[(0,n.jsx)("span",{className:"animate-pulse",children:""}),e.countdown,"s"]}),!i&&(0,n.jsx)(er.$,{variant:"ghost",size:"sm",onClick:()=>r(t=>new Set(t).add(e.id)),className:"h-8 w-8 p-0 text-yellow-200 hover:bg-yellow-500/20 hover:text-yellow-100",children:(0,n.jsx)(S.A,{className:"h-4 w-4"})})]}),(0,n.jsx)("p",{className:"text-base font-semibold ".concat(i?"text-red-200":"text-yellow-200"),children:e.message}),(0,n.jsxs)("p",{className:"text-sm font-medium ".concat(i?"text-red-300/80":"text-yellow-300/80"),children:[" ",e.action]})]})]})]},e.id)})})}function eb(e){let{children:t}=e;return!function(){let e=(0,s.T)(e=>e.tick),t=(0,o.useRef)(null);(0,o.useEffect)(()=>(t.current=setInterval(()=>{e()},1e3),()=>{t.current&&clearInterval(t.current)}),[e]),(0,o.useEffect)(()=>{let e=setInterval(()=>{s.T.getState().settings.autoSave&&s.T.getState().saveGame(0)},3e4);return()=>clearInterval(e)},[])}(),(0,n.jsxs)("div",{className:"flex min-h-screen flex-col pb-16",children:[(0,n.jsx)(V,{}),(0,n.jsx)("main",{className:"flex-1 overflow-y-auto",children:t}),(0,n.jsx)("div",{className:"fixed bottom-0 left-0 right-0 z-50",children:(0,n.jsx)(es,{})}),(0,n.jsx)(eu,{}),(0,n.jsx)(em,{})]})}},9041:e=>{e.exports=JSON.parse('[{"id":"shelter","name":"Refugee Shelter","description":"Provides housing for survivors and slowly increases population","icon":"\uD83C\uDFE0","category":"production","baseCost":{"supplies":25},"costMultiplier":1.11,"baseProduction":{"survivors":0.3},"maintenance":{"supplies":0.15},"productionExponent":1.08,"workerCapacity":10,"workerEfficiency":0.05,"upgrades":["shelter_upgrade_1","shelter_upgrade_2","shelter_upgrade_3","shelter_upgrade_4","shelter_upgrade_5"],"effects":{"morale":0.015}},{"id":"farm","name":"Supply Farm","description":"Produces supplies through agriculture and resource gathering","icon":"\uD83C\uDF3E","category":"production","baseCost":{"supplies":60},"costMultiplier":1.12,"baseProduction":{"supplies":1.5},"maintenance":{"supplies":0.12},"productionExponent":1.1,"workerCapacity":10,"workerEfficiency":0.025,"upgrades":["farm_upgrade_1","farm_upgrade_2","farm_upgrade_3","farm_upgrade_4","farm_upgrade_5"]},{"id":"radio_tower","name":"Radio Tower","description":"Broadcasts messages and coordinates efforts, generating influence","icon":"\uD83D\uDCE1","category":"special","baseCost":{"supplies":200},"costMultiplier":1.11,"baseProduction":{"influence":0.3},"maintenance":{"supplies":0.5},"productionExponent":1.08,"workerCapacity":5,"workerEfficiency":0.04,"upgrades":["radio_upgrade_1","radio_upgrade_2","radio_upgrade_3","radio_upgrade_4","radio_upgrade_5"],"effects":{"morale":0.008}},{"id":"lab","name":"Research Lab","description":"Conducts research and generates knowledge for technological advancement","icon":"\uD83D\uDD2C","category":"research","baseCost":{"supplies":400},"costMultiplier":1.14,"baseProduction":{"knowledge":0.08},"maintenance":{"supplies":0.7},"productionExponent":1.15,"workerCapacity":8,"workerEfficiency":0.035,"unlockCondition":{"phase":1},"upgrades":["lab_upgrade_1","lab_upgrade_2","lab_upgrade_3","lab_upgrade_4","lab_upgrade_5"],"effects":{"containmentCoefficient":0.002}},{"id":"containment_unit","name":"Containment Unit","description":"Specialized facility for containing and studying the infection","icon":"\uD83D\uDEE1","category":"defense","baseCost":{"supplies":1000},"costMultiplier":1.13,"baseProduction":{},"maintenance":{"supplies":1},"productionExponent":1.05,"workerCapacity":15,"workerEfficiency":0.006,"unlockCondition":{"phase":2},"upgrades":["containment_upgrade_1","containment_upgrade_2","containment_upgrade_3","containment_upgrade_4","containment_upgrade_5"],"effects":{"infectionRate":-0.015,"containmentCoefficient":0.004}},{"id":"workshop","name":"Workshop","description":"Manufactures tools and equipment, boosting overall production by 0.8% per level","icon":"\uD83D\uDD27","category":"production","baseCost":{"supplies":1500},"costMultiplier":1.14,"baseProduction":{},"maintenance":{"supplies":1.5},"productionExponent":1,"workerCapacity":12,"workerEfficiency":0.012,"unlockCondition":{"phase":3},"upgrades":["workshop_upgrade_1","workshop_upgrade_2","workshop_upgrade_3","workshop_upgrade_4","workshop_upgrade_5"],"effects":{"productionBonus":0.008}},{"id":"university","name":"University","description":"Advanced education center that accelerates research and boosts morale","icon":"\uD83C\uDF93","category":"research","baseCost":{"supplies":4000,"knowledge":80},"costMultiplier":1.15,"baseProduction":{"knowledge":0.03},"maintenance":{"supplies":1.2},"productionExponent":1.2,"workerCapacity":10,"workerEfficiency":0.06,"unlockCondition":{"phase":4},"upgrades":["university_upgrade_1","university_upgrade_2","university_upgrade_3","university_upgrade_4","university_upgrade_5"],"effects":{"morale":0.008}},{"id":"satellite","name":"Satellite Uplink","description":"Global communication network that reduces events and improves containment","icon":"\uD83D\uDEF0","category":"special","baseCost":{"supplies":12000,"knowledge":400,"influence":80},"costMultiplier":1.16,"baseProduction":{},"maintenance":{"supplies":2},"productionExponent":1,"workerCapacity":3,"workerEfficiency":0.025,"unlockCondition":{"phase":5,"technology":"sat_uplink"},"upgrades":["satellite_upgrade_1","satellite_upgrade_2","satellite_upgrade_3","satellite_upgrade_4","satellite_upgrade_5"],"effects":{"eventReduction":0.08,"containmentCoefficient":0.015}},{"id":"clinic","name":"Medical Clinic","description":"Treats the infected and improves public health","icon":"\uD83C\uDFE5","category":"special","baseCost":{"supplies":6000,"knowledge":150},"costMultiplier":1.12,"baseProduction":{},"productionExponent":1,"workerCapacity":20,"workerEfficiency":0.005,"unlockCondition":{"phase":4},"upgrades":["clinic_upgrade_1","clinic_upgrade_2","clinic_upgrade_3","clinic_upgrade_4","clinic_upgrade_5"],"effects":{"morale":0.005,"infectionRate":-0.008}},{"id":"synthesis_station","name":"Serum Synthesis Station","description":"Advanced facility for synthesizing the cure serum","icon":"","category":"special","baseCost":{"supplies":50000,"knowledge":2000,"influence":400},"costMultiplier":1.3,"baseProduction":{},"productionExponent":1,"workerCapacity":15,"workerEfficiency":0.004,"unlockCondition":{"phase":8,"technology":"alpha_synthesis"},"upgrades":["synthesis_upgrade_1","synthesis_upgrade_2","synthesis_upgrade_3","synthesis_upgrade_4","synthesis_upgrade_5"],"effects":{"serumProduction":0.002}}]')},9060:(e,t,i)=>{i.d(t,{z:()=>o});var n=i(5155);function o(e){let{icon:t,title:i,description:o,badge:s,stats:r}=e;return(0,n.jsxs)("div",{className:"mb-6 rounded-lg border border-border bg-surface-elevated p-6",children:[(0,n.jsx)("div",{className:"flex items-start justify-between",children:(0,n.jsxs)("div",{className:"flex items-start gap-4",children:[(0,n.jsx)("div",{className:"rounded-lg border border-border bg-surface p-3",children:(0,n.jsx)(t,{className:"h-6 w-6 text-primary"})}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:i}),s&&(0,n.jsx)("span",{className:"rounded border px-2 py-1 text-xs font-semibold uppercase ".concat({primary:"bg-primary/20 text-primary border-primary/30",success:"bg-success/20 text-success border-success/30",warning:"bg-warning/20 text-warning border-warning/30",danger:"bg-danger/20 text-danger border-danger/30",info:"bg-info/20 text-info border-info/30"}[s.color]),children:s.label})]}),(0,n.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:o})]})]})}),r&&r.length>0&&(0,n.jsx)("div",{className:"mt-4 grid grid-cols-2 gap-4 border-t border-border pt-4 md:grid-cols-4",children:r.map((e,t)=>(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("span",{className:"text-xs text-subtle-foreground",children:e.label}),(0,n.jsx)("span",{className:"text-data text-lg font-bold ".concat(e.color||"text-foreground"),children:e.value})]},t))})]})}},9815:e=>{e.exports=JSON.parse('[{"id":"shelter_upgrade_1","buildingId":"shelter","name":"Reinforced Housing","description":"Strengthen shelter structures for better protection and efficiency","cost":{"supplies":100,"knowledge":20},"effects":{"productionMultiplier":1.25,"morale":3},"unlockCondition":{"buildingLevel":3}},{"id":"shelter_upgrade_2","buildingId":"shelter","name":"Community Centers","description":"Add community spaces to improve morale and stability","cost":{"supplies":250,"knowledge":50},"effects":{"productionMultiplier":1.5,"globalStability":2},"unlockCondition":{"buildingLevel":5}},{"id":"shelter_upgrade_3","buildingId":"shelter","name":"Medical Facilities","description":"Integrate basic medical facilities into shelters","cost":{"supplies":600,"knowledge":120},"effects":{"productionMultiplier":1.75,"infectionRate":-0.5},"unlockCondition":{"buildingLevel":10,"technology":"field_medicine"}},{"id":"shelter_upgrade_4","buildingId":"shelter","name":"Vertical Expansion","description":"Build upward to house more survivors efficiently","cost":{"supplies":1200,"knowledge":200},"effects":{"productionMultiplier":2,"workerEfficiency":0.02},"unlockCondition":{"buildingLevel":15}},{"id":"shelter_upgrade_5","buildingId":"shelter","name":"Self-Sustaining Habitats","description":"Create fully independent living communities","cost":{"supplies":2500,"knowledge":400},"effects":{"productionMultiplier":2.5,"morale":5,"globalStability":3},"unlockCondition":{"buildingLevel":20,"technology":"resilient_society"}},{"id":"farm_upgrade_1","buildingId":"farm","name":"Irrigation Systems","description":"Install irrigation to improve crop yields","cost":{"supplies":150,"knowledge":30},"effects":{"productionMultiplier":1.3,"workerEfficiency":0.01},"unlockCondition":{"buildingLevel":3}},{"id":"farm_upgrade_2","buildingId":"farm","name":"Advanced Agriculture","description":"Implement advanced farming techniques for maximum efficiency","cost":{"supplies":300,"knowledge":75,"influence":10},"effects":{"productionMultiplier":1.5,"costReduction":0.05},"unlockCondition":{"buildingLevel":5,"technology":"efficient_farming"}},{"id":"farm_upgrade_3","buildingId":"farm","name":"Greenhouse Networks","description":"Construct climate-controlled greenhouses for year-round production","cost":{"supplies":800,"knowledge":150},"effects":{"productionMultiplier":1.8,"workerEfficiency":0.015},"unlockCondition":{"buildingLevel":10}},{"id":"farm_upgrade_4","buildingId":"farm","name":"Hydroponic Systems","description":"Install advanced hydroponic farming for maximum efficiency","cost":{"supplies":1500,"knowledge":300},"effects":{"productionMultiplier":2.2,"costReduction":0.1},"unlockCondition":{"buildingLevel":15,"technology":"emergency_mechanics"}},{"id":"farm_upgrade_5","buildingId":"farm","name":"Bio-Engineered Crops","description":"Deploy genetically optimized crops for superior yields","cost":{"supplies":3000,"knowledge":600},"effects":{"productionMultiplier":3,"workerEfficiency":0.02,"morale":2},"unlockCondition":{"buildingLevel":20,"technology":"biolab_security"}},{"id":"radio_upgrade_1","buildingId":"radio_tower","name":"Signal Amplification","description":"Boost signal strength to reach distant communities","cost":{"supplies":300,"knowledge":50,"influence":15},"effects":{"productionMultiplier":1.4,"morale":2},"unlockCondition":{"buildingLevel":3}},{"id":"radio_upgrade_2","buildingId":"radio_tower","name":"Broadcast Network","description":"Establish a network of repeaters for wider coverage","cost":{"supplies":700,"knowledge":100,"influence":30},"effects":{"productionMultiplier":1.8,"globalStability":2},"unlockCondition":{"buildingLevel":6,"technology":"civilian_networks"}},{"id":"radio_upgrade_3","buildingId":"radio_tower","name":"Emergency Broadcast System","description":"Implement crisis communication protocols","cost":{"supplies":1500,"knowledge":200,"influence":50},"effects":{"productionMultiplier":2.2,"morale":3,"infectionRate":-0.5},"unlockCondition":{"buildingLevel":10,"technology":"sat_uplink"}},{"id":"radio_upgrade_4","buildingId":"radio_tower","name":"Digital Communications","description":"Upgrade to digital broadcasting for better clarity and reach","cost":{"supplies":3000,"knowledge":400,"influence":100},"effects":{"productionMultiplier":2.8,"workerEfficiency":0.015},"unlockCondition":{"buildingLevel":15,"technology":"orbital_comms"}},{"id":"radio_upgrade_5","buildingId":"radio_tower","name":"Global Communication Hub","description":"Transform into a worldwide coordination center","cost":{"supplies":6000,"knowledge":800,"influence":200},"effects":{"productionMultiplier":3.5,"globalStability":5,"morale":5},"unlockCondition":{"buildingLevel":20}},{"id":"lab_upgrade_1","buildingId":"lab","name":"Enhanced Equipment","description":"Upgrade lab equipment for faster research","cost":{"supplies":200,"knowledge":100},"effects":{"productionMultiplier":1.4,"infectionRate":-1},"unlockCondition":{"buildingLevel":3}},{"id":"lab_upgrade_2","buildingId":"lab","name":"Biosafety Protocols","description":"Implement advanced safety measures for research","cost":{"supplies":500,"knowledge":250,"influence":20},"effects":{"productionMultiplier":1.75,"infectionRate":-2},"unlockCondition":{"buildingLevel":6,"technology":"field_medicine"}},{"id":"lab_upgrade_3","buildingId":"lab","name":"Automated Analysis","description":"Deploy AI-assisted research systems","cost":{"supplies":1200,"knowledge":500},"effects":{"productionMultiplier":2.2,"workerEfficiency":0.02,"containmentCoefficient":0.005},"unlockCondition":{"buildingLevel":10,"technology":"mobile_labs"}},{"id":"lab_upgrade_4","buildingId":"lab","name":"Genetic Sequencing Lab","description":"Advanced genetic analysis for breakthrough research","cost":{"supplies":2500,"knowledge":1000},"effects":{"productionMultiplier":2.8,"infectionRate":-3},"unlockCondition":{"buildingLevel":15,"technology":"biolab_security"}},{"id":"lab_upgrade_5","buildingId":"lab","name":"Breakthrough Research Wing","description":"State-of-the-art facilities for revolutionary discoveries","cost":{"supplies":5000,"knowledge":2000},"effects":{"productionMultiplier":3.5,"containmentCoefficient":0.01,"globalStability":3},"unlockCondition":{"buildingLevel":20,"technology":"provisional_vaccine"}},{"id":"containment_upgrade_1","buildingId":"containment_unit","name":"Reinforced Barriers","description":"Strengthen containment barriers to prevent breaches","cost":{"supplies":800,"knowledge":150},"effects":{"workerEfficiency":0.003,"infectionRate":-1,"containmentCoefficient":0.005},"unlockCondition":{"buildingLevel":3}},{"id":"containment_upgrade_2","buildingId":"containment_unit","name":"Decontamination Chambers","description":"Install advanced decontamination systems","cost":{"supplies":1500,"knowledge":300},"effects":{"workerEfficiency":0.005,"infectionRate":-2,"morale":2},"unlockCondition":{"buildingLevel":6,"technology":"advanced_containment"}},{"id":"containment_upgrade_3","buildingId":"containment_unit","name":"Negative Pressure Systems","description":"Prevent airborne contamination with pressure control","cost":{"supplies":3000,"knowledge":600},"effects":{"workerEfficiency":0.008,"infectionRate":-3,"containmentCoefficient":0.01},"unlockCondition":{"buildingLevel":10,"technology":"protocol_zero"}},{"id":"containment_upgrade_4","buildingId":"containment_unit","name":"Isolation Protocols","description":"Implement strict isolation for maximum containment","cost":{"supplies":6000,"knowledge":1200},"effects":{"workerEfficiency":0.01,"infectionRate":-4,"globalStability":3},"unlockCondition":{"buildingLevel":15}},{"id":"containment_upgrade_5","buildingId":"containment_unit","name":"Zero-Breach Protocol","description":"Ultimate containment system with zero failure tolerance","cost":{"supplies":12000,"knowledge":2500},"effects":{"workerEfficiency":0.015,"infectionRate":-6,"containmentCoefficient":0.02,"morale":5},"unlockCondition":{"buildingLevel":20,"technology":"provisional_vaccine"}},{"id":"workshop_upgrade_1","buildingId":"workshop","name":"Tool Fabrication","description":"Produce advanced tools to boost all operations","cost":{"supplies":1000,"knowledge":200},"effects":{"workerEfficiency":0.005,"productionBonus":0.003},"unlockCondition":{"buildingLevel":3}},{"id":"workshop_upgrade_2","buildingId":"workshop","name":"Assembly Line","description":"Streamline production with assembly line efficiency","cost":{"supplies":2500,"knowledge":400},"effects":{"workerEfficiency":0.008,"productionBonus":0.005,"costReduction":0.05},"unlockCondition":{"buildingLevel":6,"technology":"emergency_mechanics"}},{"id":"workshop_upgrade_3","buildingId":"workshop","name":"Advanced Manufacturing","description":"Implement cutting-edge manufacturing techniques","cost":{"supplies":5000,"knowledge":800},"effects":{"workerEfficiency":0.012,"productionBonus":0.008,"morale":2},"unlockCondition":{"buildingLevel":10}},{"id":"workshop_upgrade_4","buildingId":"workshop","name":"Automated Production","description":"Deploy robotic systems for automated manufacturing","cost":{"supplies":10000,"knowledge":1600},"effects":{"workerEfficiency":0.016,"productionBonus":0.012,"costReduction":0.1},"unlockCondition":{"buildingLevel":15,"technology":"orbital_comms"}},{"id":"workshop_upgrade_5","buildingId":"workshop","name":"Industrial Revolution","description":"Transform into a fully automated smart factory","cost":{"supplies":20000,"knowledge":3200},"effects":{"workerEfficiency":0.025,"productionBonus":0.015,"globalStability":5,"morale":5},"unlockCondition":{"buildingLevel":20,"technology":"resilient_society"}},{"id":"university_upgrade_1","buildingId":"university","name":"Research Grants","description":"Fund specialized research programs","cost":{"supplies":2000,"knowledge":500},"effects":{"productionMultiplier":1.3,"morale":3},"unlockCondition":{"buildingLevel":3}},{"id":"university_upgrade_2","buildingId":"university","name":"Advanced Curriculum","description":"Develop specialized training programs","cost":{"supplies":4000,"knowledge":1000},"effects":{"productionMultiplier":1.6,"workerEfficiency":0.02,"globalStability":2},"unlockCondition":{"buildingLevel":6}},{"id":"university_upgrade_3","buildingId":"university","name":"Think Tank","description":"Establish elite research and strategy center","cost":{"supplies":8000,"knowledge":2000},"effects":{"productionMultiplier":2,"morale":5,"infectionRate":-1},"unlockCondition":{"buildingLevel":10,"technology":"biolab_security"}},{"id":"university_upgrade_4","buildingId":"university","name":"Global Academy","description":"Partner with international institutions","cost":{"supplies":16000,"knowledge":4000},"effects":{"productionMultiplier":2.5,"workerEfficiency":0.04,"globalStability":3},"unlockCondition":{"buildingLevel":15,"technology":"orbital_comms"}},{"id":"university_upgrade_5","buildingId":"university","name":"Center of Excellence","description":"Become the world\'s leading research institution","cost":{"supplies":32000,"knowledge":8000},"effects":{"productionMultiplier":3,"morale":10,"globalStability":5,"containmentCoefficient":0.01},"unlockCondition":{"buildingLevel":20,"technology":"alpha_synthesis"}},{"id":"satellite_upgrade_1","buildingId":"satellite","name":"Enhanced Sensors","description":"Upgrade satellite sensors for better outbreak tracking","cost":{"supplies":8000,"knowledge":1500,"influence":200},"effects":{"workerEfficiency":0.01,"containmentCoefficient":0.01,"infectionRate":-1},"unlockCondition":{"buildingLevel":3}},{"id":"satellite_upgrade_2","buildingId":"satellite","name":"Orbital Array","description":"Deploy multiple satellites for global coverage","cost":{"supplies":16000,"knowledge":3000,"influence":400},"effects":{"workerEfficiency":0.015,"containmentCoefficient":0.015,"globalStability":3},"unlockCondition":{"buildingLevel":6,"technology":"orbital_comms"}},{"id":"satellite_upgrade_3","buildingId":"satellite","name":"Real-Time Monitoring","description":"Enable instant global outbreak detection","cost":{"supplies":32000,"knowledge":6000,"influence":800},"effects":{"workerEfficiency":0.02,"infectionRate":-2,"morale":5},"unlockCondition":{"buildingLevel":10}},{"id":"satellite_upgrade_4","buildingId":"satellite","name":"Predictive Analytics","description":"AI-powered outbreak prediction system","cost":{"supplies":64000,"knowledge":12000,"influence":1600},"effects":{"workerEfficiency":0.025,"containmentCoefficient":0.025,"infectionRate":-3},"unlockCondition":{"buildingLevel":15,"technology":"provisional_vaccine"}},{"id":"satellite_upgrade_5","buildingId":"satellite","name":"Global Defense Network","description":"Worldwide early warning and response system","cost":{"supplies":128000,"knowledge":25000,"influence":3200},"effects":{"workerEfficiency":0.035,"containmentCoefficient":0.04,"infectionRate":-5,"globalStability":10},"unlockCondition":{"buildingLevel":20,"technology":"alpha_synthesis"}},{"id":"clinic_upgrade_1","buildingId":"clinic","name":"Emergency Ward","description":"Dedicated emergency treatment facilities","cost":{"supplies":3000,"knowledge":600},"effects":{"workerEfficiency":0.003,"infectionRate":-0.5,"morale":2},"unlockCondition":{"buildingLevel":3}},{"id":"clinic_upgrade_2","buildingId":"clinic","name":"Advanced Diagnostics","description":"State-of-the-art diagnostic equipment","cost":{"supplies":6000,"knowledge":1200},"effects":{"workerEfficiency":0.005,"infectionRate":-1,"containmentCoefficient":0.005},"unlockCondition":{"buildingLevel":6,"technology":"synthetic_drugs"}},{"id":"clinic_upgrade_3","buildingId":"clinic","name":"Intensive Care Unit","description":"Specialized ICU for critical patients","cost":{"supplies":12000,"knowledge":2400},"effects":{"workerEfficiency":0.008,"infectionRate":-1.5,"morale":4},"unlockCondition":{"buildingLevel":10,"technology":"advanced_containment"}},{"id":"clinic_upgrade_4","buildingId":"clinic","name":"Trauma Center","description":"Comprehensive trauma and outbreak response","cost":{"supplies":24000,"knowledge":4800},"effects":{"workerEfficiency":0.012,"infectionRate":-2,"globalStability":3},"unlockCondition":{"buildingLevel":15,"technology":"protocol_zero"}},{"id":"clinic_upgrade_5","buildingId":"clinic","name":"Medical Complex","description":"Transform into a full-service medical center","cost":{"supplies":48000,"knowledge":9600},"effects":{"workerEfficiency":0.015,"infectionRate":-3,"morale":8,"containmentCoefficient":0.015},"unlockCondition":{"buildingLevel":20,"technology":"provisional_vaccine"}},{"id":"synthesis_upgrade_1","buildingId":"synthesis_station","name":"Purification Systems","description":"Advanced serum purification technology","cost":{"supplies":25000,"knowledge":5000},"effects":{"workerEfficiency":0.002,"serumProduction":0.001},"unlockCondition":{"buildingLevel":3}},{"id":"synthesis_upgrade_2","buildingId":"synthesis_station","name":"Batch Processing","description":"Increase serum production throughput","cost":{"supplies":50000,"knowledge":10000},"effects":{"workerEfficiency":0.004,"serumProduction":0.002,"infectionRate":-1},"unlockCondition":{"buildingLevel":6}},{"id":"synthesis_upgrade_3","buildingId":"synthesis_station","name":"Quality Assurance","description":"Ensure maximum serum efficacy and safety","cost":{"supplies":100000,"knowledge":20000},"effects":{"workerEfficiency":0.006,"serumProduction":0.003,"morale":5},"unlockCondition":{"buildingLevel":10}},{"id":"synthesis_upgrade_4","buildingId":"synthesis_station","name":"Mass Production","description":"Scale up serum production for global distribution","cost":{"supplies":200000,"knowledge":40000},"effects":{"workerEfficiency":0.008,"serumProduction":0.005,"globalStability":5},"unlockCondition":{"buildingLevel":15}},{"id":"synthesis_upgrade_5","buildingId":"synthesis_station","name":"Cure Distribution Network","description":"Worldwide serum distribution system","cost":{"supplies":400000,"knowledge":80000},"effects":{"workerEfficiency":0.01,"serumProduction":0.008,"infectionRate":-5,"globalStability":10,"morale":15},"unlockCondition":{"buildingLevel":20}}]')},9987:(e,t,i)=>{function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"short";return"full"===t?e.toLocaleString("en-US",{maximumFractionDigits:0}):e>=1e9?"".concat((e/1e9).toFixed(2),"B"):e>=1e6?"".concat((e/1e6).toFixed(2),"M"):e>=1e3?"".concat((e/1e3).toFixed(2),"K"):e.toFixed(0)}function o(e){let t=Math.floor(e/3600),i=Math.floor(e%3600/60),n=Math.floor(e%60);return t>0?"".concat(t,"h ").concat(i,"m"):i>0?"".concat(i,"m ").concat(n,"s"):"".concat(n,"s")}function s(e,t,i){return Math.floor(e*Math.pow(i,t))}function r(e,t,i,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return(e*Math.pow(t,s)+i*n*t)*o.reduce((e,t)=>e*t,1)}i.d(t,{KY:()=>r,ZV:()=>n,fU:()=>o,yN:()=>s})}}]);