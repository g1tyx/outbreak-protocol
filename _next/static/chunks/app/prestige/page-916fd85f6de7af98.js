(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[678],{4754:(e,r,s)=>{Promise.resolve().then(s.bind(s,5899))},5196:(e,r,s)=>{"use strict";s.d(r,{A:()=>t});let t=(0,s(9946).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},5899:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>C});var t=s(5155),a=s(2115),l=s(7063),c=s(9060),n=s(3405),d=s(4574),i=s(1960),o=s(7168),x=s(9946);let m=(0,x.A)("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);var u=s(2111),h=s(5525);let g=(0,x.A)("Sword",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]]);var p=s(8564),b=s(7951),f=s(8186),j=s(1539),v=s(3109),N=s(5196),w=s(2919),y=s(1284),k=s(7116),A=s(9629);let P={coins:m,flask:u.A,shield:h.A,sword:g,star:p.A},_={amber:{border:"border-amber-500/50",bg:"bg-amber-500/10",text:"text-amber-500",hover:"hover:border-amber-500",active:"border-amber-500 bg-amber-500/20",glow:"shadow-[0_0_20px_rgba(245,158,11,0.4)]",line:"#f59e0b"},blue:{border:"border-blue-500/50",bg:"bg-blue-500/10",text:"text-blue-500",hover:"hover:border-blue-500",active:"border-blue-500 bg-blue-500/20",glow:"shadow-[0_0_20px_rgba(59,130,246,0.4)]",line:"#3b82f6"},green:{border:"border-green-500/50",bg:"bg-green-500/10",text:"text-green-500",hover:"hover:border-green-500",active:"border-green-500 bg-green-500/20",glow:"shadow-[0_0_20px_rgba(34,197,94,0.4)]",line:"#22c55e"},red:{border:"border-red-500/50",bg:"bg-red-500/10",text:"text-red-500",hover:"hover:border-red-500",active:"border-red-500 bg-red-500/20",glow:"shadow-[0_0_20px_rgba(239,68,68,0.4)]",line:"#ef4444"},purple:{border:"border-purple-500/50",bg:"bg-purple-500/10",text:"text-purple-500",hover:"hover:border-purple-500",active:"border-purple-500 bg-purple-500/20",glow:"shadow-[0_0_20px_rgba(168,85,247,0.4)]",line:"#a855f7"}};function C(){let e=(0,n.T)(e=>e.prestigePoints),r=(0,n.T)(e=>e.ancestralData),s=(0,n.T)(e=>e.prestigeUpgrades)||[],x=(0,n.T)(e=>e.purchasePrestigeUpgrade),m=(0,n.T)(e=>e.refundPrestigeUpgrade),[u,h]=(0,a.useState)("economy_path"),[g,C]=(0,a.useState)(null),[G,E]=(0,a.useState)({}),M=(0,a.useRef)(null),L=(0,a.useMemo)(()=>(0,A.calculatePrestigeBonuses)(s),[s]),z=(0,a.useMemo)(()=>(0,A.getPrestigeBonusDescriptions)(L),[L]),S=k.find(e=>e.id===u)||k[0],T=_[S.color],U=e=>{x(e)},B=e=>{m(e)},R=(0,a.useMemo)(()=>{let e={};return S.upgrades.forEach(r=>{e[r.tier]||(e[r.tier]=[]),e[r.tier].push(r)}),e},[S]),D=Math.max(...Object.keys(R).map(Number)),X=e=>s.includes(e),q=r=>X(r.id)?"purchased":(0,A.canPurchaseUpgrade)(r.id,s,e).canPurchase?"available":"locked";(0,a.useEffect)(()=>{let e={};S.upgrades.forEach(r=>{let s=document.getElementById("node-".concat(r.id));if(s&&M.current){let t=M.current.getBoundingClientRect(),a=s.getBoundingClientRect();e[r.id]={id:r.id,x:a.left-t.left+a.width/2,y:a.top-t.top+a.height/2,element:s}}}),E(e)},[S,u]);let O=s.reduce((e,r)=>{let s=k.flatMap(e=>e.upgrades).find(e=>e.id===r);return e+((null==s?void 0:s.cost)||0)},0);return(0,t.jsx)(l.r,{children:(0,t.jsxs)("div",{className:"mx-auto max-w-7xl space-y-8 p-4 pb-24",children:[(0,t.jsx)(c.z,{icon:b.A,title:"Ancestral Legacy",description:"Permanent upgrades that carry across all future runs",badge:{label:s.length>0?"ENHANCED":"STANDARD",color:s.length>0?"success":"info"},stats:[{label:"Available",value:e.toString(),color:"text-purple-500"},{label:"Total Earned",value:r.toString(),color:"text-amber-500"}]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 border-l-4 border-purple-500/50 pl-3",children:[(0,t.jsx)(b.A,{className:"h-6 w-6 text-purple-500"}),(0,t.jsx)("h2",{className:"text-2xl font-bold uppercase tracking-wide terminal-text",children:"Legacy Status"})]}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,t.jsx)(d.Gv,{variant:"hologram",withCorners:!0,withGrid:!0,className:"glow-tactical",children:(0,t.jsx)(d.Xu,{children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("div",{className:"absolute inset-0 data-stream opacity-5 pointer-events-none"}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"rounded border-2 border-purple-500/40 bg-purple-500/10 p-2.5 relative",children:[(0,t.jsx)(f.A,{className:"h-6 w-6 text-purple-500"}),(0,t.jsx)("div",{className:"absolute -top-1 -right-1 h-3 w-3 rounded-full bg-purple-500 animate-pulse"})]}),(0,t.jsx)(i.Wh,{variant:"primary",size:"sm",withLED:!0,children:"UNSPENT"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide font-bold text-muted-foreground",children:"Available Points"}),(0,t.jsx)("div",{className:"text-3xl font-bold font-mono text-purple-500",children:e})]}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground font-mono",children:[O," points invested"]})]})})}),(0,t.jsx)(d.Gv,{variant:"hologram",withCorners:!0,withGrid:!0,children:(0,t.jsx)(d.Xu,{children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsx)("div",{className:"rounded border-2 border-success/40 bg-success/10 p-2.5",children:(0,t.jsx)(j.A,{className:"h-6 w-6 text-success"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide font-bold text-muted-foreground",children:"Active Upgrades"}),(0,t.jsx)("div",{className:"text-3xl font-bold font-mono text-success",children:s.length})]}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground font-mono",children:[k.flatMap(e=>e.upgrades).length," total available"]})]})})}),(0,t.jsx)(d.Gv,{variant:"hologram",withCorners:!0,withGrid:!0,children:(0,t.jsx)(d.Xu,{children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsx)("div",{className:"rounded border-2 border-amber-500/40 bg-amber-500/10 p-2.5",children:(0,t.jsx)(p.A,{className:"h-6 w-6 text-amber-500"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide font-bold text-muted-foreground",children:"Legacy Points Earned"}),(0,t.jsx)("div",{className:"text-3xl font-bold font-mono text-amber-500",children:r})]}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground font-mono",children:"Lifetime accumulation"})]})})})]})]}),z.length>0&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 border-l-4 border-success/50 pl-3",children:[(0,t.jsx)(v.A,{className:"h-6 w-6 text-success"}),(0,t.jsx)("h2",{className:"text-2xl font-bold uppercase tracking-wide terminal-text",children:"Active Legacy Bonuses"})]}),(0,t.jsx)(d.Gv,{variant:"hologram",withCorners:!0,withGrid:!0,className:"glow-hazmat",children:(0,t.jsx)(d.Xu,{children:(0,t.jsx)("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2 lg:grid-cols-3",children:z.map((e,r)=>(0,t.jsx)("div",{className:"rounded-lg border-2 border-success/30 bg-success/5 px-4 py-3 text-center font-mono text-sm font-bold text-success",children:e},r))})})})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 border-l-4 border-primary/50 pl-3",children:[(0,t.jsx)(f.A,{className:"h-6 w-6 text-primary"}),(0,t.jsx)("h2",{className:"text-2xl font-bold uppercase tracking-wide terminal-text",children:"Legacy Paths"})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2 lg:grid-cols-5",children:k.map(e=>{let r=P[e.icon],s=_[e.color],a=u===e.id,l=e.upgrades.filter(e=>X(e.id)).length;return(0,t.jsxs)("button",{onClick:()=>h(e.id),className:"group relative flex flex-col items-center gap-3 rounded-lg border-2 p-4 text-sm font-medium transition-all ".concat(a?"".concat(s.active," ").concat(s.glow):"".concat(s.border," ").concat(s.bg," ").concat(s.hover," bg-surface/50")),children:[(0,t.jsx)("div",{className:"rounded-full border-2 ".concat(a?s.border:"border-border/50"," ").concat(a?s.bg:"bg-surface"," p-3"),children:(0,t.jsx)(r,{className:"h-6 w-6 ".concat(a?s.text:"text-muted-foreground")})}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"font-bold uppercase tracking-wide ".concat(a?s.text:"text-foreground"),children:e.name}),(0,t.jsxs)("div",{className:"text-[10px] text-muted-foreground mt-1",children:[l,"/",e.upgrades.length," unlocked"]})]})]},e.id)})}),(0,t.jsx)(d.Gv,{variant:"hologram",withCorners:!0,withGrid:!0,className:"".concat(T.border),children:(0,t.jsx)(d.Xu,{children:(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(()=>{let e=P[S.icon];return(0,t.jsx)("div",{className:"rounded-full border-2 ".concat(T.border," ").concat(T.bg," p-3"),children:(0,t.jsx)(e,{className:"h-7 w-7 ".concat(T.text)})})})(),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"text-lg font-bold uppercase tracking-wide ".concat(T.text),children:S.name}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground font-mono mt-1",children:S.description})]})]})})})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 border-l-4 border-warning/50 pl-3",children:[(0,t.jsx)(p.A,{className:"h-6 w-6 text-warning"}),(0,t.jsx)("h2",{className:"text-2xl font-bold uppercase tracking-wide terminal-text",children:"Upgrade Tree"})]}),(0,t.jsx)(d.Gv,{variant:"default",withCorners:!0,withGrid:!0,className:"relative overflow-hidden",children:(0,t.jsx)(d.Xu,{className:"p-8",children:(0,t.jsxs)("div",{ref:M,className:"relative min-h-[900px]",children:[(0,t.jsxs)("svg",{className:"pointer-events-none absolute inset-0 h-full w-full",style:{zIndex:0},children:[(0,t.jsxs)("defs",{children:[(0,t.jsxs)("linearGradient",{id:"lineGradient-".concat(S.id),x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:T.line,stopOpacity:"0.8"}),(0,t.jsx)("stop",{offset:"100%",stopColor:T.line,stopOpacity:"0.4"})]}),(0,t.jsxs)("filter",{id:"glow",children:[(0,t.jsx)("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),(0,t.jsxs)("feMerge",{children:[(0,t.jsx)("feMergeNode",{in:"coloredBlur"}),(0,t.jsx)("feMergeNode",{in:"SourceGraphic"})]})]})]}),S.upgrades.map(e=>e.prerequisites.map(r=>{if(!S.upgrades.find(e=>e.id===r))return null;let s=X(e.id),a=X(r),l=G[r],c=G[e.id];if(!l||!c)return null;let n=s&&a;return(0,t.jsxs)("g",{children:[(0,t.jsx)("line",{x1:l.x,y1:l.y,x2:c.x,y2:c.y,stroke:n?T.line:"rgba(255,255,255,0.15)",strokeWidth:n?"4":"2",strokeDasharray:n?"0":"6,6",filter:n?"url(#glow)":"",opacity:n?"1":"0.6"}),n&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("circle",{cx:l.x,cy:l.y,r:"4",fill:T.line,filter:"url(#glow)"}),(0,t.jsx)("circle",{cx:c.x,cy:c.y,r:"4",fill:T.line,filter:"url(#glow)"})]})]},"".concat(r,"-").concat(e.id))}))]}),(0,t.jsx)("div",{className:"relative",style:{zIndex:1},children:Array.from({length:D},(e,r)=>r+1).map(r=>{var a;return(0,t.jsxs)("div",{className:"mb-20",children:[(0,t.jsxs)("div",{className:"mb-8 flex items-center justify-center gap-4",children:[(0,t.jsx)("div",{className:"h-px flex-1 bg-gradient-to-r from-transparent via-border to-border"}),(0,t.jsxs)(i.Wh,{variant:"primary",size:"md",className:"".concat(T.text," px-6 py-2 text-base font-bold uppercase tracking-wider"),children:[(0,t.jsx)(p.A,{className:"h-4 w-4 mr-2"}),"TIER ",r]}),(0,t.jsx)("div",{className:"h-px flex-1 bg-gradient-to-l from-transparent via-border to-border"})]}),(0,t.jsx)("div",{className:"flex flex-wrap justify-center gap-6",children:null===(a=R[r])||void 0===a?void 0:a.map(r=>{let a=q(r),l="purchased"===a,c="locked"===a,n=g===r.id,d=(0,A.canPurchaseUpgrade)(r.id,s,e);return(0,t.jsx)("div",{id:"node-".concat(r.id),className:"group relative w-80 transition-all duration-300 ".concat(n?"scale-105 z-10":""),onMouseEnter:()=>C(r.id),onMouseLeave:()=>C(null),children:(0,t.jsxs)("div",{className:"relative rounded-xl border-2 p-6 backdrop-blur transition-all ".concat(l?"".concat(T.border," ").concat(T.bg," ").concat(T.glow):c?"border-border/30 bg-surface/20 opacity-70":"".concat(T.border," bg-surface/80 ").concat(T.hover)),children:[(0,t.jsx)("div",{className:"absolute -right-3 -top-3 z-10",children:(0,t.jsx)("div",{className:"flex h-14 w-14 items-center justify-center rounded-full border-2 transition-all ".concat(l?"".concat(T.border," ").concat(T.bg," ").concat(T.glow):c?"border-border/30 bg-surface/50":"".concat(T.border," bg-surface")),children:l?(0,t.jsx)(N.A,{className:"h-7 w-7 ".concat(T.text)}):c?(0,t.jsx)(w.A,{className:"h-7 w-7 text-muted-foreground"}):(0,t.jsx)(f.A,{className:"h-7 w-7 ".concat(T.text)})})}),(0,t.jsxs)("div",{className:"mb-5",children:[(0,t.jsx)("h4",{className:"text-lg font-bold uppercase tracking-wide ".concat(l?T.text:"text-foreground"),children:r.name}),(0,t.jsx)("p",{className:"mt-2 text-sm text-muted-foreground leading-relaxed font-mono",children:r.description})]}),(0,t.jsxs)("div",{className:"mb-5 space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 rounded-lg border border-border/50 bg-background/30 px-3 py-2",children:[(0,t.jsx)(f.A,{className:"h-5 w-5 ".concat(T.text)}),(0,t.jsxs)("span",{className:"text-base font-bold font-mono ".concat(T.text),children:[r.cost," ",1===r.cost?"Point":"Points"]})]}),r.prerequisites.length>0&&(0,t.jsx)("div",{className:"rounded-lg border border-border/40 bg-background/40 p-3",children:(0,t.jsxs)("div",{className:"flex items-start gap-2 text-xs",children:[(0,t.jsx)(y.A,{className:"h-4 w-4 text-muted-foreground mt-0.5 flex-shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-bold text-muted-foreground uppercase tracking-wide",children:"Requires: "}),r.prerequisites.map((e,s)=>{let a=S.upgrades.find(r=>r.id===e),l=X(e);return(0,t.jsxs)("span",{children:[(0,t.jsx)("span",{className:"font-mono ".concat(l?"text-success font-bold":"text-danger"),children:(null==a?void 0:a.name)||e}),s<r.prerequisites.length-1&&", "]},e)})]})]})})]}),l?(0,t.jsxs)(o.$,{variant:"outline",size:"lg",className:"w-full ".concat(T.border," ").concat(T.text," hover:").concat(T.bg," border-2 font-bold uppercase tracking-wide"),onClick:()=>B(r.id),children:["Refund (",r.cost," ",1===r.cost?"Point":"Points",")"]}):(0,t.jsx)(o.$,{variant:"default",size:"lg",className:"w-full ".concat(c?"cursor-not-allowed opacity-50 bg-surface/50":"".concat(T.bg," ").concat(T.border," ").concat(T.text," border-2 font-bold hover:").concat(T.glow," uppercase tracking-wide")),disabled:c||!d.canPurchase,onClick:()=>U(r.id),children:c?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(w.A,{className:"mr-2 h-5 w-5"}),d.reason||"Locked"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f.A,{className:"mr-2 h-5 w-5"}),"Unlock Upgrade"]})})]})},r.id)})})]},r)})})]})})})]}),(0,t.jsx)(d.Gv,{variant:"hologram",withCorners:!0,withGrid:!0,children:(0,t.jsx)(d.Xu,{children:(0,t.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(y.A,{className:"h-5 w-5 text-primary flex-shrink-0 mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-bold text-primary uppercase tracking-wide mb-2",children:"How to Earn Legacy Points:"}),(0,t.jsx)("p",{className:"text-muted-foreground font-mono",children:"Earn prestige points by completing runs (victory or defeat). Points are awarded based on your progress through phases, buildings constructed, technologies researched, and provinces controlled."})]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-3 rounded-lg border border-warning/30 bg-warning/5 p-3",children:[(0,t.jsx)(f.A,{className:"h-5 w-5 text-warning flex-shrink-0 mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-bold text-warning uppercase tracking-wide mb-1",children:"Minimum Requirements:"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground font-mono",children:"Reach Phase 3 and play for at least 5 minutes to earn prestige points."})]})]})]})})})]})})}},8564:(e,r,s)=>{"use strict";s.d(r,{A:()=>t});let t=(0,s(9946).A)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])}},e=>{var r=r=>e(e.s=r);e.O(0,[61,268,405,135,441,684,358],()=>r(4754)),_N_E=e.O()}]);